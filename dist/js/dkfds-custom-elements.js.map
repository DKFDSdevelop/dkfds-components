{"version":3,"file":"js/dkfds-custom-elements.js","mappings":";;;;;AAAa;;AAEN,IAAIA,QAAQ,GAAG;EAClB,WAAW,EAAE,MAAM;EACnB,UAAU,EAAE,SAAS;EACrB,cAAc,EAAE,eAAe;EAC/B,cAAc,EAAE,YAAY;EAC5B,sBAAsB,EAAE,6BAA6B;EACrD,wBAAwB,EAAE,6BAA6B;EACvD,0BAA0B,EAAE,+BAA+B;EAC3D,4BAA4B,EAAE,+BAA+B;EAC7D,mBAAmB,EAAE,qCAAqC;EAC1D,iBAAiB,EAAE;AACvB,CAAC;AAEM,SAASC,cAAcA,CAACC,WAAW,EAAEC,WAAW,EAAE;EACrD,IAAIC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACD,WAAW,CAAC;EACnCC,IAAI,CAACE,OAAO,CAAEC,GAAG,IAAK;IAClB,IAAIL,WAAW,CAACK,GAAG,CAAC,KAAKC,SAAS,EAAE;MAChCN,WAAW,CAACK,GAAG,CAAC,GAAGJ,WAAW,CAACI,GAAG,CAAC;IACvC;EACJ,CAAC,CAAC;AACN;;ACtBa;;AAEN,SAASE,WAAWA,CAACC,IAAI,EAAE;EAC9B,MAAMC,KAAK,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,CAAC;EAEnE,IAAIA,KAAK,CAACC,QAAQ,CAACF,IAAI,CAAC,EAAE;IACtB,OAAO,IAAI;EACf,CAAC,MACI;IACD,OAAO,KAAK;EAChB;AACJ;AAEO,SAASG,cAAcA,CAACC,OAAO,EAAE;EACpC,IAAIC,MAAM,GAAGC,QAAQ,CAACF,OAAO,CAAC;EAC9B,OAAOG,MAAM,CAACC,SAAS,CAACH,MAAM,CAAC;AACnC;AAEO,SAASI,WAAWA,CAACC,CAAC,EAAE;EAC3B;EACA,IAAI,CAACA,CAAC,EAAE;IACJ,OAAO,KAAK;EAChB;EACA;EAAA,KACK,IAAI,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,YAAYC,MAAM,EAAE;IACnD,IAAID,CAAC,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACjB,OAAO,KAAK;IAChB,CAAC,MACI;MACD,OAAO,IAAI;IACf;EACJ;EACA;EAAA,KACK;IACD,OAAO,KAAK;EAChB;AACJ;;ACpCa;;AAEb;AACA;AACA;AAEO,SAASC,iBAAiBA,CAACC,YAAY,EAAEC,YAAY,EAAE;EAC1D,IAAIC,YAAY,GAAG,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,CAACJ,QAAQ,CAAC,CAAC;EAC9GL,YAAY,CAACU,YAAY,CAAC,KAAK,EAAER,YAAY,CAAC;EAC9CD,YAAY,CAACS,YAAY,CAAC,IAAI,EAAER,YAAY,CAAC;AACjD;AAEO,SAASS,cAAcA,CAACV,YAAY,EAAE;EACzCA,YAAY,CAACS,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;AAC7C;;AAEA;AACA;AACA;;AAEA,SAASE,qBAAqBA,CAACpC,QAAQ,EAAEqC,cAAc,EAAE;EACrD,IAAIC,OAAO,GAAG,EAAE;EAEhB,IAAID,cAAc,KAAK,CAAC,CAAC,EAAE;IACvB,IAAIE,QAAQ,GAAGR,IAAI,CAACS,GAAG,CAACH,cAAc,CAAC;IACvCC,OAAO,GAAGtC,QAAQ,CAAC,0BAA0B,CAAC,CAACyC,OAAO,CAAC,SAAS,EAAEF,QAAQ,CAAC;EAC/E,CAAC,MACI,IAAIF,cAAc,KAAK,CAAC,EAAE;IAC3BC,OAAO,GAAGtC,QAAQ,CAAC,sBAAsB,CAAC,CAACyC,OAAO,CAAC,SAAS,EAAEJ,cAAc,CAAC;EACjF,CAAC,MACI,IAAIA,cAAc,IAAI,CAAC,EAAE;IAC1BC,OAAO,GAAGtC,QAAQ,CAAC,wBAAwB,CAAC,CAACyC,OAAO,CAAC,SAAS,EAAEJ,cAAc,CAAC;EACnF,CAAC,MACI;IACD,IAAIE,QAAQ,GAAGR,IAAI,CAACS,GAAG,CAACH,cAAc,CAAC;IACvCC,OAAO,GAAGtC,QAAQ,CAAC,4BAA4B,CAAC,CAACyC,OAAO,CAAC,SAAS,EAAEF,QAAQ,CAAC;EACjF;EAEA,OAAOD,OAAO;AAClB;AAEO,SAASI,oBAAoBA,CAAC1C,QAAQ,EAAEqC,cAAc,EAAEZ,YAAY,EAAEkB,qBAAqB,EAAE;EAChG,IAAIC,UAAU,GAAGR,qBAAqB,CAACpC,QAAQ,EAAEqC,cAAc,CAAC;EAChE,IAAIQ,cAAc,GAAGF,qBAAqB,CAACG,aAAa,CAAC,kBAAkB,CAAC;EAE5E,IAAIT,cAAc,GAAG,CAAC,EAAE;IACpBQ,cAAc,CAACE,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC9CvB,YAAY,CAACsB,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;EAClD,CAAC,MACI;IACDH,cAAc,CAACE,SAAS,CAACE,MAAM,CAAC,gBAAgB,CAAC;IACjDxB,YAAY,CAACsB,SAAS,CAACE,MAAM,CAAC,kBAAkB,CAAC;EACrD;EAEAJ,cAAc,CAACK,SAAS,GAAGN,UAAU;AACzC;AAEO,SAASO,eAAeA,CAACnD,QAAQ,EAAEqC,cAAc,EAAEM,qBAAqB,EAAE;EAC7E,IAAIC,UAAU,GAAGR,qBAAqB,CAACpC,QAAQ,EAAEqC,cAAc,CAAC;EAChE,IAAIe,SAAS,GAAGT,qBAAqB,CAACG,aAAa,CAAC,aAAa,CAAC;EAClEM,SAAS,CAACF,SAAS,GAAGN,UAAU;AACpC;;AAEA;AACA;AACA;;AAEO,SAASS,aAAaA,CAACC,eAAe,EAAE7B,YAAY,EAAE;EACzD6B,eAAe,CAACC,EAAE,GAAG9B,YAAY,CAAC8B,EAAE,GAAG,WAAW;AACtD;AAEO,SAASC,UAAUA,CAACC,YAAY,EAAEhC,YAAY,EAAE;EACnDgC,YAAY,CAACF,EAAE,GAAG9B,YAAY,CAAC8B,EAAE,GAAG,QAAQ;AAChD;AAEO,SAASG,mBAAmBA,CAACf,qBAAqB,EAAElB,YAAY,EAAE;EACrEkB,qBAAqB,CAACG,aAAa,CAAC,YAAY,CAAC,CAACS,EAAE,GAAG9B,YAAY,CAAC8B,EAAE,GAAG,QAAQ;AACrF;AAEO,SAASI,YAAYA,CAACC,cAAc,EAAEnC,YAAY,EAAE;EACvDmC,cAAc,CAACC,OAAO,CAACC,SAAS,GAAGrC,YAAY,CAAC8B,EAAE,GAAG,UAAU;EAAC;AACpE;AAEO,SAASQ,kBAAkBA,CAACN,YAAY,EAAEO,SAAS,EAAEC,MAAM,EAAE;EAChER,YAAY,CAACP,SAAS,GAAG,wBAAwB,GAAGe,MAAM,GAAG,WAAW,GAAGD,SAAS;AACxF;AAEO,SAASE,gBAAgBA,CAACC,iBAAiB,EAAEC,SAAS,EAAEC,QAAQ,EAAE;EACrEF,iBAAiB,CAACjB,SAAS,GAAG,iGAAiG,GAAGmB,QAAQ,GAAG,yBAAyB,GAAGD,SAAS,GAAG,SAAS;AAClM;AAEO,SAASE,mBAAmBA,CAAC9C,YAAY,EAAE4C,SAAS,EAAEG,YAAY,EAAE;EACvE/C,YAAY,CAAC0B,SAAS,GAAGkB,SAAS,GAAG,iCAAiC,GAAGG,YAAY,GAAG,UAAU;AACtG;AAEO,SAASC,mBAAmBA,CAAChD,YAAY,EAAE4C,SAAS,EAAEK,YAAY,EAAE;EACvEjD,YAAY,CAAC0B,SAAS,GAAGkB,SAAS,GAAG,gCAAgC,GAAGK,YAAY,GAAG,UAAU;AACrG;AAEO,SAASC,2BAA2BA,CAACC,QAAQ,EAAEC,UAAU,EAAEC,UAAU,EAAEC,UAAU,EAAEC,YAAY,EAAEC,YAAY,EAAEC,UAAU,EAAE;EAC9H,IAAIC,UAAU,GAAG,CAACN,UAAU;EAC5B,IAAID,QAAQ,IAAIG,UAAU,EAAE;IACxB,MAAM,IAAIK,KAAK,CAAC,uEAAuE,CAAC;EAC5F;EACA,IAAIR,QAAQ,IAAIE,UAAU,EAAE;IACxB,MAAM,IAAIM,KAAK,CAAC,uEAAuE,CAAC;EAC5F;EACA,IAAIP,UAAU,IAAIE,UAAU,EAAE;IAC1B,MAAM,IAAIK,KAAK,CAAC,0EAA0E,CAAC;EAC/F;EACA,IAAIP,UAAU,IAAIC,UAAU,EAAE;IAC1B,MAAM,IAAIM,KAAK,CAAC,0EAA0E,CAAC;EAC/F;EACA,IAAID,UAAU,IAAIH,YAAY,EAAE;IAC5B,MAAM,IAAII,KAAK,CAAC,+DAA+D,CAAC;EACpF;EACA,IAAIP,UAAU,IAAII,YAAY,EAAE;IAC5B,MAAM,IAAIG,KAAK,CAAC,+DAA+D,CAAC;EACpF;EACA,IAAIJ,YAAY,IAAIC,YAAY,EAAE;IAC9B,MAAM,IAAIG,KAAK,CAAC,wDAAwD,CAAC;EAC7E;EACA,IAAIF,UAAU,IAAIH,UAAU,EAAE;IAC1B,MAAM,IAAIK,KAAK,CAAC,yEAAyE,CAAC;EAC9F;EACA,IAAIF,UAAU,IAAIJ,UAAU,EAAE;IAC1B,MAAM,IAAIM,KAAK,CAAC,yEAAyE,CAAC;EAC9F;AACJ;;AChIa;;AAE6E;AAC3C;AAExC,SAASE,YAAYA,CAACC,QAAQ,EAAE7D,YAAY,EAAE;EACjD;EACA,IAAIN,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvB7D,YAAY,CAACS,YAAY,CAAC,cAAc,EAAEoD,QAAQ,CAAC;EACvD;EACA;EAAA,KACK;IACD7D,YAAY,CAAC8D,eAAe,CAAC,cAAc,CAAC;EAChD;AACJ;AAEO,SAASC,QAAQA,CAACF,QAAQ,EAAE9D,YAAY,EAAEC,YAAY,EAAEgE,mBAAmB,EAAE;EAChF;EACA,IAAIH,QAAQ,KAAK,IAAI,EAAE;IACnB9D,YAAY,CAACuB,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;IACtCvB,YAAY,CAACS,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;IACzCuD,mBAAmB,CAAC1C,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;EACjD;EACA;EAAA,KACK;IACDxB,YAAY,CAACuB,SAAS,CAACE,MAAM,CAAC,UAAU,CAAC;IACzCxB,YAAY,CAAC8D,eAAe,CAAC,UAAU,CAAC;IACxCE,mBAAmB,CAAC1C,SAAS,CAACE,MAAM,CAAC,UAAU,CAAC;EACpD;AACJ;AAEO,SAASyC,KAAKA,CAACJ,QAAQ,EAAEK,cAAc,EAAElE,YAAY,EAAE;EAC1D;EACA,IAAIN,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvBK,cAAc,CAAC5C,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;IAC1CvB,YAAY,CAACS,YAAY,CAAC,cAAc,EAAE,MAAM,CAAC;EACrD;EACA;EAAA,KACK;IACDyD,cAAc,CAAC5C,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;IAC7CxB,YAAY,CAAC8D,eAAe,CAAC,cAAc,CAAC;EAChD;AACJ;AAEO,SAASK,QAAQA,CAACN,QAAQ,EAAEhC,eAAe,EAAE;EAChD;EACA,IAAInC,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvBhC,eAAe,CAACuC,WAAW,GAAGP,QAAQ;EAC1C;EACA;EAAA,KACK;IACDhC,eAAe,CAACuC,WAAW,GAAG,EAAE;EACpC;AACJ;AAEO,SAASC,OAAOA,CAACR,QAAQ,EAAE9D,YAAY,EAAEC,YAAY,EAAE;EAC1D;EACA,IAAIN,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvB9D,YAAY,CAACU,YAAY,CAAC,KAAK,EAAEoD,QAAQ,CAAC;IAC1C7D,YAAY,CAACS,YAAY,CAAC,IAAI,EAAEoD,QAAQ,CAAC;EAC7C;EACA;EAAA,KACK;IACDF,iBAAyB,CAAC5D,YAAY,EAAEC,YAAY,CAAC;EACzD;AACJ;AAEO,SAASsE,KAAKA,CAACT,QAAQ,EAAE9D,YAAY,EAAE;EAC1C;EACA,IAAI8D,QAAQ,KAAK,IAAI,EAAE;IACnB,IAAInE,WAAW,CAACmE,QAAQ,CAAC,EAAE;MACvB9D,YAAY,CAACqE,WAAW,GAAGP,QAAQ;IACvC,CAAC,MACI;MACD,MAAM,IAAIH,KAAK,CAAC,4BAA4BG,QAAQ,IAAI,CAAC;IAC7D;EACJ;EACA;EACA;AACJ;AAEO,SAASU,OAAOA,CAACV,QAAQ,EAAE7D,YAAY,EAAEkB,qBAAqB,EAAEsD,SAAS,EAAEjG,QAAQ,EAAEkG,WAAW,EAAEC,WAAW,EAAEC,UAAU,EAAEC,cAAc,EAAEC,KAAK,EAAEC,sBAAsB,EAAE;EAC7K;EACA,IAAI1F,cAAc,CAACyE,QAAQ,CAAC,EAAE;IAC1B3C,qBAAqB,CAACG,aAAa,CAAC,YAAY,CAAC,CAACI,SAAS,GAAGlD,QAAQ,CAAC,mBAAmB,CAAC,CAACyC,OAAO,CAAC,SAAS,EAAE6C,QAAQ,CAAC;IAExH,IAAIkB,mBAAmB,GAAGlB,QAAQ;IAClC,IAAIgB,KAAK,EAAE;MACPE,mBAAmB,GAAGxF,QAAQ,CAACsE,QAAQ,CAAC,GAAGgB,KAAK,CAACG,MAAM;IAC3D;IACArB,oBAA4B,CAACpF,QAAQ,EAAEwG,mBAAmB,EAAE/E,YAAY,EAAEkB,qBAAqB,CAAC;IAChGyC,eAAuB,CAACpF,QAAQ,EAAEwG,mBAAmB,EAAE7D,qBAAqB,CAAC;EACjF;;EAEA;EACA,IAAIsD,SAAS,IAAI,CAACM,sBAAsB,IAAI1F,cAAc,CAACyE,QAAQ,CAAC,EAAE;IAClE7D,YAAY,CAACiF,gBAAgB,CAAC,OAAO,EAAER,WAAW,EAAE,KAAK,CAAC;IAC1DzE,YAAY,CAACiF,gBAAgB,CAAC,OAAO,EAAEP,WAAW,EAAE,KAAK,CAAC;IAC1D1E,YAAY,CAACiF,gBAAgB,CAAC,MAAM,EAAEN,UAAU,EAAE,KAAK,CAAC;IACxDO,MAAM,CAACD,gBAAgB,CAAC,UAAU,EAAEL,cAAc,EAAE,KAAK,CAAC;EAC9D;EACA;EAAA,KACK,IAAIJ,SAAS,IAAIM,sBAAsB,IAAI,CAAC1F,cAAc,CAACyE,QAAQ,CAAC,EAAE;IACvE7D,YAAY,CAACmF,mBAAmB,CAAC,OAAO,EAAEV,WAAW,EAAE,KAAK,CAAC;IAC7DzE,YAAY,CAACmF,mBAAmB,CAAC,OAAO,EAAET,WAAW,EAAE,KAAK,CAAC;IAC7D1E,YAAY,CAACmF,mBAAmB,CAAC,MAAM,EAAER,UAAU,EAAE,KAAK,CAAC;IAC3DO,MAAM,CAACC,mBAAmB,CAAC,UAAU,EAAEP,cAAc,EAAE,KAAK,CAAC;EACjE;AACJ;AAEO,SAASQ,QAAQA,CAACvB,QAAQ,EAAE7D,YAAY,EAAE;EAC7C;EACA,IAAIZ,cAAc,CAACyE,QAAQ,CAAC,EAAE;IAC1B,IAAIwB,aAAa,GAAG,EAAE,CAAC,CAAC;IACxB,IAAIC,YAAY,GAAK,CAAC,CAAC,CAAC;IACxBtF,YAAY,CAACuF,KAAK,CAACC,QAAQ,GAAG,OAAO,GAAGjG,QAAQ,CAACsE,QAAQ,CAAC,GAAG,OAAO,IAAIwB,aAAa,GAAGC,YAAY,CAAC,GAAG,KAAK;IAC7GtF,YAAY,CAACuF,KAAK,CAACE,KAAK,GAAG,MAAM;EACrC;EACA;EAAA,KACK;IACDzF,YAAY,CAACuF,KAAK,CAACC,QAAQ,GAAG,EAAE;IAChCxF,YAAY,CAACuF,KAAK,CAACE,KAAK,GAAG,EAAE;EACjC;AACJ;AAEO,SAASC,gCAAIA,CAAC7B,QAAQ,EAAE7D,YAAY,EAAE;EACzC;EACA,IAAI6D,QAAQ,KAAK,IAAI,EAAE;IACnB,IAAInE,WAAW,CAACmE,QAAQ,CAAC,EAAE;MACvB7D,YAAY,CAACS,YAAY,CAAC,MAAM,EAAEoD,QAAQ,CAAC;IAC/C,CAAC,MACI;MACD,MAAM,IAAIH,KAAK,CAAC,2BAA2BG,QAAQ,IAAI,CAAC;IAC5D;EACJ;EACA;EACA;AACJ;AAEO,SAAS8B,MAAMA,CAAC9B,QAAQ,EAAEG,mBAAmB,EAAE4B,aAAa,EAAE;EACjE;EACA,IAAIlG,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvBG,mBAAmB,CAAC1C,SAAS,CAACC,GAAG,CAAC,4BAA4B,CAAC;IAC/DqE,aAAa,CAACxB,WAAW,GAAGP,QAAQ;EACxC;EACA;EAAA,KACK;IACDG,mBAAmB,CAAC1C,SAAS,CAACE,MAAM,CAAC,4BAA4B,CAAC;EACtE;AACJ;AAEO,SAASqE,QAAQA,CAAChC,QAAQ,EAAE7D,YAAY,EAAEgE,mBAAmB,EAAE;EAClE;EACA,IAAIH,QAAQ,KAAK,IAAI,EAAE;IACnB7D,YAAY,CAACS,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;IACzCuD,mBAAmB,CAAC1C,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;EACjD;EACA;EAAA,KACK;IACDvB,YAAY,CAAC8D,eAAe,CAAC,UAAU,CAAC;IACxCE,mBAAmB,CAAC1C,SAAS,CAACE,MAAM,CAAC,UAAU,CAAC;EACpD;AACJ;AAEO,SAASsE,QAAQA,CAACjC,QAAQ,EAAE7D,YAAY,EAAE;EAC7C;EACA,IAAI6D,QAAQ,KAAK,IAAI,EAAE;IACnB7D,YAAY,CAACS,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;EAC7C;EACA;EAAA,KACK;IACDT,YAAY,CAAC8D,eAAe,CAAC,UAAU,CAAC;EAC5C;AACJ;AAEO,SAASiC,MAAMA,CAAClC,QAAQ,EAAEG,mBAAmB,EAAEgC,aAAa,EAAE;EACjE;EACA,IAAItG,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvBG,mBAAmB,CAAC1C,SAAS,CAACC,GAAG,CAAC,4BAA4B,CAAC;IAC/DyE,aAAa,CAAC5B,WAAW,GAAGP,QAAQ;EACxC;EACA;EAAA,KACK;IACDG,mBAAmB,CAAC1C,SAAS,CAACE,MAAM,CAAC,4BAA4B,CAAC;EACtE;AACJ;AAEO,SAASyE,OAAOA,CAACpC,QAAQ,EAAE1B,cAAc,EAAE;EAC9C;EACA,IAAIzC,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvB1B,cAAc,CAACC,OAAO,CAAC6D,OAAO,GAAGpC,QAAQ;EAC7C;AACJ;AAEO,SAAS5E,IAAIA,CAAC4E,QAAQ,EAAE7D,YAAY,EAAE;EACzC;EACA,IAAIN,WAAW,CAACmE,QAAQ,CAAC,EAAE;IACvB,IAAI7E,WAAW,CAAC6E,QAAQ,CAAC,EAAE;MACvB7D,YAAY,CAACS,YAAY,CAAC,MAAM,EAAEoD,QAAQ,CAAC;IAC/C,CAAC,MACI;MACD,MAAM,IAAIH,KAAK,CAAC,2BAA2BG,QAAQ,IAAI,CAAC;IAC5D;EACJ;EACA;EAAA,KACK;IACDF,cAAsB,CAAC3D,YAAY,CAAC;EACxC;AACJ;AAEO,SAAS6E,KAAKA,CAAChB,QAAQ,EAAE7D,YAAY,EAAEkB,qBAAqB,EAAEsD,SAAS,EAAEjG,QAAQ,EAAEgG,OAAO,EAAE;EAC/F;EACA,IAAIV,QAAQ,KAAK,IAAI,EAAE;IACnB7D,YAAY,CAACS,YAAY,CAAC,OAAO,EAAEoD,QAAQ,CAAC;EAChD;EACA;EAAA,KACK;IACD7D,YAAY,CAAC8D,eAAe,CAAC,OAAO,CAAC;EACzC;EACA;EACA,IAAI,CAACU,SAAS,IAAIpF,cAAc,CAACmF,OAAO,CAAC,EAAE;IACvC,IAAI2B,KAAK,GAAG3G,QAAQ,CAACgF,OAAO,CAAC,GAAGV,QAAQ,CAACmB,MAAM;IAC/CrB,oBAA4B,CAACpF,QAAQ,EAAE2H,KAAK,EAAElG,YAAY,EAAEkB,qBAAqB,CAAC;IAClFyC,eAAuB,CAACpF,QAAQ,EAAE2H,KAAK,EAAEhF,qBAAqB,CAAC;EACnE;AACJ;;ACjOa;;AAEgE;;AAE7E;;AAEO,SAASiF,oBAAoBA,CAAA,EAAG;EACnC,IAAIjC,cAAc,GAAGkC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAClDnC,cAAc,CAAC5C,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;EAC1C,OAAO2C,cAAc;AACzB;AAEO,SAASoC,kBAAkBA,CAAA,EAAG;EACjC,IAAIvG,YAAY,GAAGqG,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;EAClDtG,YAAY,CAACuB,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;EACxC,OAAOxB,YAAY;AACvB;AAEO,SAASwG,oBAAoBA,CAAChI,QAAQ,EAAE;EAC3C,IAAI4D,cAAc,GAAGiE,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EACnDlE,cAAc,CAACb,SAAS,CAACC,GAAG,CAAC,iBAAiB,EAAE,wBAAwB,EAAE,MAAM,CAAC;EACjFY,cAAc,CAACC,OAAO,CAAC6D,OAAO,GAAG,EAAE;EACnC9D,cAAc,CAACC,OAAO,CAACC,SAAS,GAAG,EAAE;EACrCF,cAAc,CAACC,OAAO,CAACoE,QAAQ,GAAG,OAAO;EACzCrE,cAAc,CAACC,OAAO,CAACqE,OAAO,GAAG,OAAO;EACxCtE,cAAc,CAACV,SAAS,GACpB,kFAAkF,GAAGlD,QAAQ,CAAC,iBAAiB,CAAC,GAAG,IAAI,GACnH,2GAA2G,GAC/G,WAAW;EACf,OAAO4D,cAAc;AACzB;AAEO,SAASuE,qBAAqBA,CAAA,EAAG;EACpC,IAAI7E,eAAe,GAAGuE,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EACpDxE,eAAe,CAACP,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;EAC1C,OAAOM,eAAe;AAC1B;AAEO,SAAS8E,kBAAkBA,CAAA,EAAG;EACjC,IAAI3E,YAAY,GAAGoE,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EACjDrE,YAAY,CAACV,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;EAChD,OAAOS,YAAY;AACvB;AAEO,SAAS4E,wBAAwBA,CAAA,EAAG;EACvC,IAAIC,kBAAkB,GAAGT,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACtDQ,kBAAkB,CAACvF,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;EAChD,OAAOsF,kBAAkB;AAC7B;AAEO,SAASC,yBAAyBA,CAAA,EAAG;EACxC,IAAI9C,mBAAmB,GAAGoC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACvDrC,mBAAmB,CAAC1C,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;EACvD,OAAOyC,mBAAmB;AAC9B;AAEO,SAAS+C,mBAAmBA,CAAA,EAAG;EAClC,IAAInB,aAAa,GAAGQ,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACjDT,aAAa,CAACtE,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAChDqE,aAAa,CAACnF,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;EACjD,OAAOmF,aAAa;AACxB;AAEO,SAASoB,kBAAkBA,CAAA,EAAG;EACjC,IAAIhH,YAAY,GAAGoG,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;EAClDrG,YAAY,CAACsB,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;EACxC,OAAOvB,YAAY;AACvB;AAEO,SAASiH,mBAAmBA,CAAA,EAAG;EAClC,IAAIjB,aAAa,GAAGI,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACjDL,aAAa,CAAC1E,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAChDyE,aAAa,CAACvF,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;EACjD,OAAOuF,aAAa;AACxB;AAEO,SAASkB,uBAAuBA,CAACC,iBAAiB,EAAE;EACvD,IAAIzE,iBAAiB,GAAG0D,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EACxD3D,iBAAiB,CAACjC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC;EAChDiC,iBAAiB,CAACpB,SAAS,CAACC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC;EAC/DmB,iBAAiB,CAACuC,gBAAgB,CAAC,OAAO,EAAEkC,iBAAiB,EAAE,KAAK,CAAC;EACrE,OAAOzE,iBAAiB;AAC5B;AAEO,SAAS0E,2BAA2BA,CAAA,EAAG;EAC1C,IAAIlG,qBAAqB,GAAGkF,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACzDnF,qBAAqB,CAACI,SAAS,CAACC,GAAG,CAAC,yBAAyB,CAAC;EAC9DL,qBAAqB,CAACO,SAAS,GAC3B,iCAAiC,GACjC,oEAAoE,GACpE,qDAAqD;EACzD,OAAOP,qBAAqB;AAChC;;AAEA;;AAEO,SAASmG,uBAAuBA,CAACpD,KAAK,EAAEE,QAAQ,EAAEI,OAAO,EAAEvC,YAAY,EAAEH,eAAe,EAAEX,qBAAqB,EAAElB,YAAY,EAAE;EAClI,IAAIsH,eAAe,GAAG,EAAE;EACxB,IAAI5H,WAAW,CAACuE,KAAK,CAAC,EAAE;IACpBqD,eAAe,GAAGA,eAAe,GAAGtF,YAAY,CAACF,EAAE,GAAG,GAAG;EAC7D;EACA,IAAIpC,WAAW,CAACyE,QAAQ,CAAC,EAAE;IACvBmD,eAAe,GAAGA,eAAe,GAAGzF,eAAe,CAACC,EAAE,GAAG,GAAG;EAChE;EACA,IAAI1C,cAAc,CAACmF,OAAO,CAAC,EAAE;IACzB+C,eAAe,GAAGA,eAAe,GAAGpG,qBAAqB,CAACG,aAAa,CAAC,YAAY,CAAC,CAACS,EAAE,GAAG,GAAG;EAClG;EACA,IAAIwF,eAAe,CAACzH,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;IAC/BG,YAAY,CAACS,YAAY,CAAC,kBAAkB,EAAE6G,eAAe,CAACzH,IAAI,CAAC,CAAC,CAAC;EACzE;AACJ;;AC9Ga;;AAEb,MAAM0H,wBAAwB,GAAG,CAAC,CAAC,CAAC;AACpC,MAAMC,YAAY,GAAG,CAAC,CAAC,CAAa;AACpC,MAAMC,UAAU,GAAG,CAAC,CAAC,CAAe;;AAEpC,SAASC,OAAOA,CAACC,OAAO,EAAE;EACtB,IAAKA,OAAO,CAACC,sBAAsB,CAAC,gBAAgB,CAAC,CAAE5C,MAAM,KAAK,CAAC,EAAE;IACjE,MAAM,IAAItB,KAAK,CAAC,uFAAuF,CAAC;EAC5G,CAAC,MACI,IAAI,CAACiE,OAAO,CAACE,YAAY,CAAC,cAAc,CAAC,IAAIF,OAAO,CAACvF,OAAO,CAAC6D,OAAO,KAAK,EAAE,EAAE;IAC9E,MAAM,IAAIvC,KAAK,CAAC,wEAAwE,CAAC;EAC7F,CAAC,MACI,IAAIiE,OAAO,CAACvF,OAAO,CAACqE,OAAO,KAAK,OAAO,IAAIkB,OAAO,CAACvF,OAAO,CAACqE,OAAO,KAAK,OAAO,EAAE;IACjF,MAAM,IAAI/C,KAAK,CAAC,6GAA6G,CAAC;EAClI,CAAC,MACI,IAAI,CAACiE,OAAO,CAACE,YAAY,CAAC,iBAAiB,CAAC,IAAIF,OAAO,CAACvF,OAAO,CAACC,SAAS,KAAK,EAAE,EAAE;IACnF,MAAM,IAAIqB,KAAK,CAAC,yEAAyE,CAAC;EAC9F,CAAC,MACI;IACD,IAAI,CAACiE,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACG,MAAM,GAAGH,OAAO,CAACC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IAEjE,IAAI,CAAC3B,OAAO,GAAGG,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;IAC7C,IAAI,CAACJ,OAAO,CAAC3E,SAAS,CAACC,GAAG,CAAC,SAAS,CAAC;IAErC,IAAIwG,KAAK,GAAG3B,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;IAC1C0B,KAAK,CAACzG,SAAS,CAACC,GAAG,CAAC,eAAe,CAAC;IACpCwG,KAAK,CAACtH,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC;EAC3C;AACJ;AAEAiH,OAAO,CAACM,SAAS,CAACC,IAAI,GAAG,YAAY;EACjC,IAAIN,OAAO,GAAG,IAAI,CAACA,OAAO;EAC1B,IAAIO,aAAa,GAAG,IAAI,CAACJ,MAAM;EAC/B,IAAIK,SAAS,GAAG,IAAI,CAAClC,OAAO;EAE5BmC,WAAW,CAACT,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;;EAE9C;EACAjD,MAAM,CAACD,gBAAgB,CAAC,QAAQ,EAAE,YAAY;IAC1CoD,qBAAqB,CAACV,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;EAC5D,CAAC,CAAC;EAEF/B,QAAQ,CAACkC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACrD,gBAAgB,CAAC,OAAO,EAAEsD,gBAAgB,CAAC;EACpFnC,QAAQ,CAACkC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACrD,gBAAgB,CAAC,OAAO,EAAEuD,UAAU,CAAC;;EAE9E;EACA,IAAIC,WAAW,GAAId,OAAO,CAACvF,OAAO,CAACqE,OAAO,KAAK,OAAQ;EACvD0B,SAAS,CAACrG,EAAE,GAAG6F,OAAO,CAACvF,OAAO,CAACC,SAAS;EAExC,IAAIoG,WAAW,EAAE;IACbd,OAAO,CAACe,MAAM,CAACP,SAAS,CAAC;IACzBQ,WAAW,CAAChB,OAAO,CAAC;IACpB,IAAIO,aAAa,CAAC5G,SAAS,CAACsH,QAAQ,CAAC,kBAAkB,CAAC,EAAE;MACtDV,aAAa,CAACzH,YAAY,CAAC,iBAAiB,EAAEkH,OAAO,CAACvF,OAAO,CAACC,SAAS,CAAC;IAC5E,CAAC,MACI;MACD6F,aAAa,CAACzH,YAAY,CAAC,kBAAkB,EAAEkH,OAAO,CAACvF,OAAO,CAACC,SAAS,CAAC;IAC7E;IACA8F,SAAS,CAAC1H,YAAY,CAAC,MAAM,EAAE,SAAS,CAAC;IACzC0H,SAAS,CAACU,SAAS,GAAGlB,OAAO,CAACvF,OAAO,CAAC6D,OAAO;IAE7CiC,aAAa,CAACjD,gBAAgB,CAAC,OAAO,EAAE,YAAY;MAChD6D,WAAW,CAACnB,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;MAC9CE,qBAAqB,CAACV,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;IAC5D,CAAC,CAAC;IAEFD,aAAa,CAACjD,gBAAgB,CAAC,WAAW,EAAE,UAAU8D,CAAC,EAAE;MACrD;AACZ;AACA;MACYb,aAAa,CAAC5G,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;MACvCyH,UAAU,CAAC,YAAY;QACnB,IAAId,aAAa,CAAC5G,SAAS,CAACsH,QAAQ,CAAC,UAAU,CAAC,EAAE;UAC9CE,WAAW,CAACnB,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;UAC9CE,qBAAqB,CAACV,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;QAC5D;MACJ,CAAC,EAAE,GAAG,CAAC;IACX,CAAC,CAAC;IAEFD,aAAa,CAACjD,gBAAgB,CAAC,aAAa,EAAE,UAAU8D,CAAC,EAAE;MACvD;AACZ;AACA;MACYb,aAAa,CAAC5G,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;MACzCyH,UAAU,CAAC,YAAY;QACnB,IAAId,aAAa,CAAC5G,SAAS,CAACsH,QAAQ,CAAC,YAAY,CAAC,EAAE;UAChDE,WAAW,CAACnB,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;UAC9CE,qBAAqB,CAACV,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;QAC5D;MACJ,CAAC,EAAE,GAAG,CAAC;IACX,CAAC,CAAC;IAEFD,aAAa,CAACjD,gBAAgB,CAAC,YAAY,EAAE,UAAU8D,CAAC,EAAE;MACtDb,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,UAAU,CAAC;MAC1C0G,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;MAC5C,IAAIyH,MAAM,GAAG,CAACf,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACC,GAAG,GAAGjB,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACE,MAAM,IAAI,CAAC,CAAC,CAAC;MAC7G,IAAIC,SAAS,GAAG,KAAK;MACrB,IAAI1B,OAAO,CAACrG,SAAS,CAACsH,QAAQ,CAAC,aAAa,CAAC,EAAE;QAC3CS,SAAS,GAAGnB,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACI,IAAI,IAAIP,CAAC,CAACQ,OAAO,IAAIR,CAAC,CAACQ,OAAO,IAAIrB,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACM,KAAK,IAAIT,CAAC,CAACU,OAAO,IAAIR,MAAM;MAC1J,CAAC,MACI,IAAItB,OAAO,CAACrG,SAAS,CAACsH,QAAQ,CAAC,aAAa,CAAC,EAAE;QAChDS,SAAS,GAAGnB,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACI,IAAI,IAAIP,CAAC,CAACQ,OAAO,IAAIR,CAAC,CAACQ,OAAO,IAAIrB,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACM,KAAK,IAAIT,CAAC,CAACU,OAAO,IAAIR,MAAM;MAC1J;MACA;MACA,IAAI,CAACI,SAAS,EAAE;QACZjB,WAAW,CAACT,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;MAClD;IACJ,CAAC,CAAC;IAEFD,aAAa,CAACjD,gBAAgB,CAAC,OAAO,EAAE,UAAU8D,CAAC,EAAE;MACjDb,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;MAC5C,IAAI4E,QAAQ,CAACsD,aAAa,KAAKxB,aAAa,EAAE;QAC1C;AAChB;AACA;AACA;QACgBA,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,UAAU,CAAC;QAC1C4G,WAAW,CAACT,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;MAClD;IACJ,CAAC,CAAC;IAEFA,SAAS,CAAClD,gBAAgB,CAAC,YAAY,EAAE,UAAU8D,CAAC,EAAE;MAClDb,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,UAAU,CAAC;MAC1C0G,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;MAC5C,IAAIyH,MAAM,GAAG,CAACd,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACC,GAAG,GAAGhB,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACE,MAAM,IAAI,CAAC,CAAC,CAAC;MACrG,IAAIO,QAAQ,GAAG,KAAK;MACpB,IAAIhC,OAAO,CAACrG,SAAS,CAACsH,QAAQ,CAAC,aAAa,CAAC,EAAE;QAC3Ce,QAAQ,GAAGxB,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACI,IAAI,IAAIP,CAAC,CAACQ,OAAO,IAAIR,CAAC,CAACQ,OAAO,IAAIpB,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACM,KAAK,IAAIT,CAAC,CAACU,OAAO,IAAIR,MAAM;MACjJ,CAAC,MACI,IAAItB,OAAO,CAACrG,SAAS,CAACsH,QAAQ,CAAC,aAAa,CAAC,EAAE;QAChDe,QAAQ,GAAGxB,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACI,IAAI,IAAIP,CAAC,CAACQ,OAAO,IAAIR,CAAC,CAACQ,OAAO,IAAIpB,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACM,KAAK,IAAIT,CAAC,CAACU,OAAO,IAAIR,MAAM;MACjJ;MACA;MACA,IAAI,CAACU,QAAQ,EAAE;QACXvB,WAAW,CAACT,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;MAClD;IACJ,CAAC,CAAC;;IAEF;AACR;IACQR,OAAO,CAAC1C,gBAAgB,CAAC,YAAY,EAAE,UAAU8D,CAAC,EAAE;MAChDb,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,UAAU,CAAC;MAC1C0G,aAAa,CAAC5G,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;MAC5C4G,WAAW,CAACT,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;IAClD,CAAC,CAAC;EACN;EACA,6FACK;IACD,IAAIyB,WAAW,GAAGxD,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;IAChDuD,WAAW,CAACnJ,YAAY,CAAC,WAAW,EAAE,WAAW,CAAC;IAClDmJ,WAAW,CAACnJ,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;IAC/CkH,OAAO,CAACe,MAAM,CAACkB,WAAW,CAAC;IAC3BA,WAAW,CAAClB,MAAM,CAACP,SAAS,CAAC;IAC7BQ,WAAW,CAAChB,OAAO,CAAC;IACpBO,aAAa,CAACzH,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;IACpDyH,aAAa,CAACzH,YAAY,CAAC,eAAe,EAAEkH,OAAO,CAACvF,OAAO,CAACC,SAAS,CAAC;IACtE6F,aAAa,CAACjD,gBAAgB,CAAC,OAAO,EAAE,YAAY;MAChD,IAAI0C,OAAO,CAACrG,SAAS,CAACsH,QAAQ,CAAC,cAAc,CAAC,EAAE;QAC5CE,WAAW,CAACnB,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;QAC9CE,qBAAqB,CAACV,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;MAC5D,CAAC,MACI;QACDC,WAAW,CAACT,OAAO,EAAEO,aAAa,EAAEC,SAAS,CAAC;MAClD;IACJ,CAAC,CAAC;EACN;AACJ,CAAC;AAED,SAASQ,WAAWA,CAACkB,cAAc,EAAE;EACjC,IAAI9B,KAAK,GAAG3B,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EAC1C0B,KAAK,CAACzG,SAAS,CAACC,GAAG,CAAC,eAAe,CAAC;EACpCwG,KAAK,CAACtH,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC;EACvCoJ,cAAc,CAACnB,MAAM,CAACX,KAAK,CAAC;AAChC;AAEA,SAAS+B,QAAQA,CAAC3B,SAAS,EAAE;EACzBA,SAAS,CAAC5C,KAAK,CAACE,KAAK,GAAG,aAAa;EACrC,IAAIsE,oBAAoB,GAAG,GAAG,CAAC,CAAC;EAChC,IAAIC,kBAAkB,GAAGD,oBAAoB,GAAItC,UAAU,GAAG,CAAE;EAChE,IAAIlI,QAAQ,CAAC2F,MAAM,CAAC+E,gBAAgB,CAAC9B,SAAS,CAAC,CAAC1C,KAAK,CAAC,GAAGuE,kBAAkB,EAAE;IACzE7B,SAAS,CAAC5C,KAAK,CAACE,KAAK,GAAGuE,kBAAkB,GAAG,IAAI;EACrD;EACA,IAAIE,cAAc,GAAG9D,QAAQ,CAAC+D,IAAI,CAACC,WAAW,GAAI3C,UAAU,GAAG,CAAE;EACjE,IAAIlI,QAAQ,CAAC2F,MAAM,CAAC+E,gBAAgB,CAAC9B,SAAS,CAAC,CAAC1C,KAAK,CAAC,GAAGyE,cAAc,EAAE;IACrE/B,SAAS,CAAC5C,KAAK,CAACE,KAAK,GAAGyE,cAAc,GAAG,IAAI;EACjD;AACJ;AAEA,SAASG,iBAAiBA,CAACR,cAAc,EAAE3B,aAAa,EAAEC,SAAS,EAAE;EACjE,IAAImC,UAAU,GAAGpC,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACC,GAAG;EAC1D,IAAIoB,UAAU,GAAGrF,MAAM,CAACsF,WAAW,GAAGtC,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACE,MAAM;EAClF,IAAIqB,MAAM,GAAGtC,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACuB,MAAM,GAAGlD,wBAAwB,GAAGC,YAAY;EAC/F,IAAIkD,SAAS,GAAG,OAAO,CAAC,CAAC;EACzB,IAAIb,cAAc,CAACzH,OAAO,CAACoE,QAAQ,KAAK,OAAO,IAAI+D,UAAU,IAAIE,MAAM,IAAKA,MAAM,GAAGH,UAAU,IAAIG,MAAM,IAAIF,UAAW,EAAE;IACtHG,SAAS,GAAG,OAAO;EACvB;EACA,IAAIA,SAAS,KAAK,OAAO,EAAE;IACvBb,cAAc,CAACvI,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;IAC3CsI,cAAc,CAACvI,SAAS,CAACE,MAAM,CAAC,aAAa,CAAC;EAClD,CAAC,MACI,IAAIkJ,SAAS,KAAK,OAAO,EAAE;IAC5Bb,cAAc,CAACvI,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;IAC3CsI,cAAc,CAACvI,SAAS,CAACE,MAAM,CAAC,aAAa,CAAC;EAClD;AACJ;AAEA,SAASmJ,OAAOA,CAACzC,aAAa,EAAEC,SAAS,EAAE;EACvC;EACA,IAAImB,IAAI,GAAG,CAAC/J,QAAQ,CAAC2I,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACzD,KAAK,CAAC,GAAGlG,QAAQ,CAAC4I,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACzD,KAAK,CAAC,IAAE,CAAC;EACxH0C,SAAS,CAAC5C,KAAK,CAAC+D,IAAI,GAAGA,IAAI,GAAG,IAAI;EAClC;EACA,IAAInB,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACI,IAAI,GAAG7B,UAAU,EAAE;IACrD,IAAImD,YAAY,GAAG,CAAC,GAAGrL,QAAQ,CAAC2I,aAAa,CAACgB,qBAAqB,CAAC,CAAC,CAACI,IAAI,CAAC,GAAG7B,UAAU;IACxFU,SAAS,CAAC5C,KAAK,CAAC+D,IAAI,GAAGsB,YAAY,GAAG,IAAI;EAC9C;EACA,yEACK,IAAIzC,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACM,KAAK,GAAIpD,QAAQ,CAAC+D,IAAI,CAACC,WAAW,GAAG3C,UAAW,EAAE;IACzF,IAAImD,YAAY,GAAGrL,QAAQ,CAAC2F,MAAM,CAAC+E,gBAAgB,CAAC9B,SAAS,CAAC,CAACmB,IAAI,CAAC,IAAInB,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACM,KAAK,GAAGpD,QAAQ,CAAC+D,IAAI,CAACC,WAAW,GAAG3C,UAAU,CAAC;IACzJU,SAAS,CAAC5C,KAAK,CAAC+D,IAAI,GAAGsB,YAAY,GAAG,IAAI;EAC9C;AACJ;AAEA,SAASC,eAAeA,CAAChB,cAAc,EAAE1B,SAAS,EAAE;EAChD,IAAI2C,KAAK,GAAG,CAAC,GAAG3C,SAAS,CAACe,qBAAqB,CAAC,CAAC,CAACuB,MAAM,GAAGjD,YAAY,GAAGD,wBAAwB,GAAG,CAAC;EACtG,IAAIsC,cAAc,CAACvI,SAAS,CAACsH,QAAQ,CAAC,aAAa,CAAC,EAAE;IAClDT,SAAS,CAAC5C,KAAK,CAAC4D,GAAG,GAAG2B,KAAK,GAAG,IAAI;IAClC3C,SAAS,CAAC5C,KAAK,CAAC6D,MAAM,GAAG,MAAM;EACnC,CAAC,MACI,IAAIS,cAAc,CAACvI,SAAS,CAACsH,QAAQ,CAAC,aAAa,CAAC,EAAE;IACvDT,SAAS,CAAC5C,KAAK,CAAC6D,MAAM,GAAG0B,KAAK,GAAG,IAAI;IACrC3C,SAAS,CAAC5C,KAAK,CAAC4D,GAAG,GAAG,MAAM;EAChC;AACJ;AAEA,SAASd,qBAAqBA,CAACwB,cAAc,EAAE3B,aAAa,EAAEC,SAAS,EAAE;EACrE2B,QAAQ,CAAC3B,SAAS,CAAC;EACnBkC,iBAAiB,CAACR,cAAc,EAAE3B,aAAa,EAAEC,SAAS,CAAC;EAC3DwC,OAAO,CAACzC,aAAa,EAAEC,SAAS,CAAC;EACjC0C,eAAe,CAAChB,cAAc,EAAE1B,SAAS,CAAC;AAC9C;AAEA,SAASC,WAAWA,CAACyB,cAAc,EAAE3B,aAAa,EAAEC,SAAS,EAAE;EAC3D0B,cAAc,CAACvI,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;EAC5C,IAAI2G,aAAa,CAACL,YAAY,CAAC,eAAe,CAAC,EAAE;IAC7CK,aAAa,CAACzH,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;IACpD0H,SAAS,CAACU,SAAS,GAAG,EAAE;EAC5B;AACJ;AAEA,SAASC,WAAWA,CAACe,cAAc,EAAE3B,aAAa,EAAEC,SAAS,EAAE;EAC3D0B,cAAc,CAACvI,SAAS,CAACE,MAAM,CAAC,cAAc,CAAC;EAC/C,IAAI0G,aAAa,CAACL,YAAY,CAAC,eAAe,CAAC,EAAE;IAC7CK,aAAa,CAACzH,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;IACnD0H,SAAS,CAACU,SAAS,GAAGgB,cAAc,CAACzH,OAAO,CAAC6D,OAAO;EACxD;AACJ;AAEA,SAASsC,gBAAgBA,CAACwC,KAAK,EAAE;EAC7B,IAAIC,QAAQ,GAAG5E,QAAQ,CAACwB,sBAAsB,CAAC,iBAAiB,CAAC;EACjE,KAAK,IAAIqD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,QAAQ,CAAChG,MAAM,EAAEiG,CAAC,EAAE,EAAE;IACtC,IAAItD,OAAO,GAAGqD,QAAQ,CAACC,CAAC,CAAC;IACzB,IAAInD,MAAM,GAAGH,OAAO,CAACC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IAChE,IAAI3B,OAAO,GAAG0B,OAAO,CAACC,sBAAsB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IAC1D,IAAIsD,eAAe,GAAGpD,MAAM,CAACoB,qBAAqB,CAAC,CAAC,CAACI,IAAI,IAAIyB,KAAK,CAACxB,OAAO,IACpDwB,KAAK,CAACxB,OAAO,IAAIzB,MAAM,CAACoB,qBAAqB,CAAC,CAAC,CAACM,KAAK,IACrD1B,MAAM,CAACoB,qBAAqB,CAAC,CAAC,CAACC,GAAG,IAAI4B,KAAK,CAACtB,OAAO,IACnDsB,KAAK,CAACtB,OAAO,IAAI3B,MAAM,CAACoB,qBAAqB,CAAC,CAAC,CAACE,MAAM;IAC5E,IAAI+B,gBAAgB,GAAGjG,MAAM,CAAC+E,gBAAgB,CAAChE,OAAO,CAAC,CAACmF,OAAO,KAAK,MAAM,IACnDnF,OAAO,CAACiD,qBAAqB,CAAC,CAAC,CAACI,IAAI,IAAIyB,KAAK,CAACxB,OAAO,IACrDwB,KAAK,CAACxB,OAAO,IAAItD,OAAO,CAACiD,qBAAqB,CAAC,CAAC,CAACM,KAAK,IACtDvD,OAAO,CAACiD,qBAAqB,CAAC,CAAC,CAACC,GAAG,IAAI4B,KAAK,CAACtB,OAAO,IACpDsB,KAAK,CAACtB,OAAO,IAAIxD,OAAO,CAACiD,qBAAqB,CAAC,CAAC,CAACE,MAAM;IAC9E,IAAI,CAAC8B,eAAe,IAAIpD,MAAM,KAAK1B,QAAQ,CAACsD,aAAa,IAAI,CAACyB,gBAAgB,EAAE;MAC5E/C,WAAW,CAACT,OAAO,EAAEG,MAAM,EAAE7B,OAAO,CAAC;IACzC;EACJ;AACJ;AAEA,SAASuC,UAAUA,CAACO,CAAC,EAAE;EACnB,IAAIjK,GAAG,GAAGiK,CAAC,CAACjK,GAAG;EACf,IAAIkM,QAAQ,GAAG5E,QAAQ,CAACwB,sBAAsB,CAAC,iBAAiB,CAAC;EACjE,IAAI9I,GAAG,KAAK,KAAK,EAAE;IACf,KAAK,IAAImM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,QAAQ,CAAChG,MAAM,EAAEiG,CAAC,EAAE,EAAE;MACtC,IAAItD,OAAO,GAAGqD,QAAQ,CAACC,CAAC,CAAC;MACzB,IAAInD,MAAM,GAAGH,OAAO,CAACC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;MAChE,IAAI3B,OAAO,GAAG0B,OAAO,CAACC,sBAAsB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;MAC1D;AACZ;MACY,IAAIxB,QAAQ,CAACsD,aAAa,KAAK5B,MAAM,EAAE;QACnCM,WAAW,CAACT,OAAO,EAAEG,MAAM,EAAE7B,OAAO,CAAC;MACzC;IACJ;EACJ,CAAC,MACI,IAAInH,GAAG,KAAK,QAAQ,EAAE;IACvB,KAAK,IAAImM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,QAAQ,CAAChG,MAAM,EAAEiG,CAAC,EAAE,EAAE;MACtC,IAAItD,OAAO,GAAGqD,QAAQ,CAACC,CAAC,CAAC;MACzB,IAAInD,MAAM,GAAGH,OAAO,CAACC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;MAChE,IAAI3B,OAAO,GAAG0B,OAAO,CAACC,sBAAsB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;MAC1DQ,WAAW,CAACT,OAAO,EAAEG,MAAM,EAAE7B,OAAO,CAAC;IACzC;EACJ;AACJ;AAEA,yDAAeyB,OAAO;;ACjTT;;AAEoC;AACyC;AAC3C;AACwB;AACpB;AACJ;AAE/C,MAAM8D,QAAQ,SAASC,WAAW,CAAC;EAE/B;;EAEA,CAACvH,cAAc;EACf,CAACnE,YAAY;EACb,CAACoC,cAAc;EACf,CAACN,eAAe;EAChB,CAACG,YAAY;EACb,CAAC6E,kBAAkB;EACnB,CAAC7C,mBAAmB;EACpB,CAAC4B,aAAa;EACd,CAAC5F,YAAY;EACb,CAACgG,aAAa;EACd,CAACtD,iBAAiB;EAClB,CAACxB,qBAAqB;EAEtB,CAACiG,iBAAiB;EAClB,CAAC1C,WAAW;EACZ,CAACE,UAAU;EACX,CAACD,WAAW;EACZ,CAACE,cAAc;EAEf,CAACrG,QAAQ;EACT,CAACiG,SAAS;EACV,CAACkH,WAAW;EACZ,CAACC,cAAc;EAEf,CAACC,kBAAkB;EACnB,CAACC,QAAQ;EACT,CAACC,UAAU;;EAEX;;EAEA,CAACC,cAAcC,CAAA,EAAG;IACd;IACA,IAAI,CAAC,CAAC9H,cAAc,CAACzC,SAAS,GAAG,EAAE;IACnC,IAAI,CAAC,CAACuC,mBAAmB,CAACvC,SAAS,GAAG,EAAE;IACxC,IAAI,CAAC,CAACzB,YAAY,CAAC8D,eAAe,CAAC,kBAAkB,CAAC;IACtD,IAAIpE,WAAW,CAAC,IAAI,CAAC4E,KAAK,CAAC,EAAE;MACzB,IAAI,CAAC,CAACvE,YAAY,CAACqE,WAAW,GAAG,IAAI,CAACE,KAAK;IAC/C;;IAEA;IACAX,aAAqB,CAAC,IAAI,CAAC,CAAC9B,eAAe,EAAE,IAAI,CAAC,CAAC7B,YAAY,CAAC;IAChE2D,UAAkB,CAAC,IAAI,CAAC,CAAC3B,YAAY,EAAE,IAAI,CAAC,CAAChC,YAAY,CAAC;IAC1D2D,mBAA2B,CAAC,IAAI,CAAC,CAACzC,qBAAqB,EAAE,IAAI,CAAC,CAAClB,YAAY,CAAC;IAC5E2D,YAAoB,CAAC,IAAI,CAAC,CAACxB,cAAc,EAAE,IAAI,CAAC,CAACnC,YAAY,CAAC;;IAE9D;IACAuL,uBAA6B,CACzB,IAAI,CAACtH,KAAK,EAAE,IAAI,CAACE,QAAQ,EAAE,IAAI,CAACI,OAAO,EACvC,IAAI,CAAC,CAACvC,YAAY,EAAE,IAAI,CAAC,CAACH,eAAe,EAAE,IAAI,CAAC,CAACX,qBAAqB,EACtE,IAAI,CAAC,CAAClB,YACV,CAAC;;IAED;IACA,IAAI,IAAI,CAAC6H,YAAY,CAAC,YAAY,CAAC,IAAInI,WAAW,CAAC,IAAI,CAAC4E,KAAK,CAAC,EAAE;MAC5DX,gBAAwB,CAAC,IAAI,CAAC,CAACjB,iBAAiB,EAAE,IAAI,CAAC4B,KAAK,EAAE,IAAI,CAAC,CAAC/F,QAAQ,CAAC,UAAU,CAAC,CAAC;IAC7F;;IAEA;IACA,IAAImB,WAAW,CAAC,IAAI,CAACuE,KAAK,CAAC,EAAE;MACzBN,kBAA0B,CAAC,IAAI,CAAC,CAAC3B,YAAY,EAAE,IAAI,CAACiC,KAAK,EAAE,IAAI,CAAC,CAAC1F,QAAQ,CAAC,WAAW,CAAC,CAAC;IAC3F;;IAEA;IACA,IAAI,CAAC,CAAC2F,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAAClM,YAAY,CAAC;;IAEpD;IACA,IAAI,IAAI,CAAC8H,YAAY,CAAC,cAAc,CAAC,IAAInI,WAAW,CAAC,IAAI,CAAC4E,KAAK,CAAC,EAAE;MAC9DX,mBAA2B,CAAC,IAAI,CAAC,CAAC5D,YAAY,EAAE,IAAI,CAACuE,KAAK,EAAE,IAAI,CAAC,CAAC/F,QAAQ,CAAC,cAAc,CAAC,CAAC;IAC/F;;IAEA;IACA,IAAI,IAAI,CAACsJ,YAAY,CAAC,cAAc,CAAC,IAAInI,WAAW,CAAC,IAAI,CAAC4E,KAAK,CAAC,EAAE;MAC9DX,mBAA2B,CAAC,IAAI,CAAC,CAAC5D,YAAY,EAAE,IAAI,CAACuE,KAAK,EAAE,IAAI,CAAC,CAAC/F,QAAQ,CAAC,cAAc,CAAC,CAAC;IAC/F;;IAEA;IACA,IAAImB,WAAW,CAAC,IAAI,CAACuG,OAAO,CAAC,EAAE;MAC3B,IAAI,CAAC,CAAC/B,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAAC9J,cAAc,CAAC;MACtD,IAAI,IAAI,CAAC,CAACA,cAAc,CAACd,aAAa,CAAC,gBAAgB,CAAC,KAAK,IAAI,EAAE;QAC/D,IAAIqG,kBAAO,CAAC,IAAI,CAAC,CAACvF,cAAc,CAAC,CAAC8F,IAAI,CAAC,CAAC;MAC5C;IACJ;;IAEA;IACA,IAAIvI,WAAW,CAAC,IAAI,CAACyE,QAAQ,CAAC,EAAE;MAC5B,IAAI,CAAC,CAACD,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAACpK,eAAe,CAAC;IAC3D;;IAEA;IACA,IAAInC,WAAW,CAAC,IAAI,CAACuE,KAAK,CAAC,EAAE;MACzB,IAAI,CAAC,CAACC,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAACjK,YAAY,CAAC;IACxD;;IAEA;IACA,IAAI,IAAI,CAAC6F,YAAY,CAAC,YAAY,CAAC,IAAI,IAAI,CAACA,YAAY,CAAC,UAAU,CAAC,EAAE;MAClE,IAAI,CAAC,CAAC3D,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAACpF,kBAAkB,CAAC;IAC9D;;IAEA;IACA,IAAInH,WAAW,CAAC,IAAI,CAACiG,MAAM,CAAC,IAAIjG,WAAW,CAAC,IAAI,CAACqG,MAAM,CAAC,EAAE;MACtD,IAAI,IAAI,CAAC8B,YAAY,CAAC,YAAY,CAAC,IAAI,IAAI,CAACA,YAAY,CAAC,UAAU,CAAC,EAAE;QAClE,IAAI,CAAC,CAAChB,kBAAkB,CAACoF,WAAW,CAAC,IAAI,CAAC,CAACjI,mBAAmB,CAAC;MACnE,CAAC,MACI;QACD,IAAI,CAAC,CAACE,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAACjI,mBAAmB,CAAC;MAC/D;IACJ;;IAEA;IACA,IAAItE,WAAW,CAAC,IAAI,CAACiG,MAAM,CAAC,EAAE;MAC1B,IAAI,CAAC,CAAC3B,mBAAmB,CAACiI,WAAW,CAAC,IAAI,CAAC,CAACrG,aAAa,CAAC;IAC9D;;IAEA;IACA,IAAIlG,WAAW,CAAC,IAAI,CAACiG,MAAM,CAAC,IAAIjG,WAAW,CAAC,IAAI,CAACqG,MAAM,CAAC,EAAE;MACtD,IAAI,CAAC,CAAC/B,mBAAmB,CAACiI,WAAW,CAAC,IAAI,CAAC,CAACjM,YAAY,CAAC;IAC7D,CAAC,MACI,IAAI,IAAI,CAAC6H,YAAY,CAAC,YAAY,CAAC,IAAI,IAAI,CAACA,YAAY,CAAC,UAAU,CAAC,EAAE;MACvE,IAAI,CAAC,CAAChB,kBAAkB,CAACoF,WAAW,CAAC,IAAI,CAAC,CAACjM,YAAY,CAAC;IAC5D,CAAC,MACI;MACD,IAAI,CAAC,CAACkE,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAACjM,YAAY,CAAC;IACxD;;IAEA;IACA,IAAIN,WAAW,CAAC,IAAI,CAACqG,MAAM,CAAC,EAAE;MAC1B,IAAI,CAAC,CAAC/B,mBAAmB,CAACiI,WAAW,CAAC,IAAI,CAAC,CAACjG,aAAa,CAAC;IAC9D;;IAEA;IACA,IAAI,IAAI,CAAC6B,YAAY,CAAC,YAAY,CAAC,IAAI,IAAI,CAACA,YAAY,CAAC,UAAU,CAAC,EAAE;MAClE,IAAI,CAAC,CAAChB,kBAAkB,CAACoF,WAAW,CAAC,IAAI,CAAC,CAACvJ,iBAAiB,CAAC;IACjE;;IAEA;IACA,IAAItD,cAAc,CAAC,IAAI,CAACmF,OAAO,CAAC,EAAE;MAC9B,IAAI,CAAC,CAACL,cAAc,CAAC+H,WAAW,CAAC,IAAI,CAAC,CAAC/K,qBAAqB,CAAC;IACjE;EACJ;EAEA,CAACgL,cAAcC,CAAA,EAAG;IACd,IAAI,IAAI,CAACtE,YAAY,CAAC,UAAU,CAAC,EAAE;MAC/B,IAAI,CAAC/D,eAAe,CAAC,UAAU,CAAC;MAChC,IAAI,CAAC,CAAC9D,YAAY,CAACoM,KAAK,CAAC,CAAC;MAC1B,IAAIC,gBAAgB,GAAG,IAAIC,KAAK,CAAC,kBAAkB,CAAC;MACpD,IAAI,CAACC,aAAa,CAACF,gBAAgB,CAAC;IACxC;EACJ;;EAEA;;EAEA,OAAOG,kBAAkB,GAAG,CAAC,cAAc,EAAE,UAAU,EAAE,YAAY,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,cAAc,EAAE,cAAc,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,OAAO,CAAC;;EAEtP;AACJ;AACA;AACA;AACA;;EAEI,IAAI5I,YAAYA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC6I,YAAY,CAAC,cAAc,CAAC;EAAE;EAC/D,IAAI7I,YAAYA,CAAC8I,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,cAAc,EAAEiM,GAAG,CAAC;EAAE;EAEhE,IAAI3I,QAAQA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC0I,YAAY,CAAC,UAAU,CAAC;EAAE;EACvD,IAAI1I,QAAQA,CAAC2I,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,UAAU,EAAEiM,GAAG,CAAC;EAAE;EAExD,IAAIC,UAAUA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACF,YAAY,CAAC,YAAY,CAAC;EAAE;EAC3D,IAAIE,UAAUA,CAACD,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,YAAY,EAAEiM,GAAG,CAAC;EAAE;EAE5D,IAAIzI,KAAKA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACwI,YAAY,CAAC,OAAO,CAAC;EAAE;EACjD,IAAIxI,KAAKA,CAACyI,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,OAAO,EAAEiM,GAAG,CAAC;EAAE;EAElD,IAAIvI,QAAQA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACsI,YAAY,CAAC,UAAU,CAAC;EAAE;EACvD,IAAItI,QAAQA,CAACuI,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,UAAU,EAAEiM,GAAG,CAAC;EAAE;EAExD,IAAIrI,OAAOA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACoI,YAAY,CAAC,SAAS,CAAC;EAAE;EACrD,IAAIpI,OAAOA,CAACqI,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,SAAS,EAAEiM,GAAG,CAAC;EAAE;EAEtD,IAAIpI,KAAKA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACmI,YAAY,CAAC,OAAO,CAAC;EAAE;EACjD,IAAInI,KAAKA,CAACoI,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,OAAO,EAAEiM,GAAG,CAAC;EAAE;EAElD,IAAInI,OAAOA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACkI,YAAY,CAAC,SAAS,CAAC;EAAE;EACrD,IAAIlI,OAAOA,CAACmI,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,SAAS,EAAEiM,GAAG,CAAC;EAAE;EAEtD,IAAItH,QAAQA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACqH,YAAY,CAAC,UAAU,CAAC;EAAE;EACvD,IAAIrH,QAAQA,CAACsH,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,UAAU,EAAEiM,GAAG,CAAC;EAAE;EAExD,IAAIhH,IAAIA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC+G,YAAY,CAAC,MAAM,CAAC;EAAE;EAC/C,IAAI/G,IAAIA,CAACgH,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,MAAM,EAAEiM,GAAG,CAAC;EAAE;EAEhD,IAAI/G,MAAMA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC8G,YAAY,CAAC,QAAQ,CAAC;EAAE;EACnD,IAAI9G,MAAMA,CAAC+G,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,QAAQ,EAAEiM,GAAG,CAAC;EAAE;EAEpD,IAAI7G,QAAQA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC4G,YAAY,CAAC,UAAU,CAAC;EAAE;EACvD,IAAI5G,QAAQA,CAAC6G,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,UAAU,EAAEiM,GAAG,CAAC;EAAE;EAExD,IAAI5G,QAAQA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC2G,YAAY,CAAC,UAAU,CAAC;EAAE;EACvD,IAAI3G,QAAQA,CAAC4G,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,UAAU,EAAEiM,GAAG,CAAC;EAAE;EAExD,IAAIE,YAAYA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACH,YAAY,CAAC,cAAc,CAAC;EAAE;EAC/D,IAAIG,YAAYA,CAACF,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,cAAc,EAAEiM,GAAG,CAAC;EAAE;EAEhE,IAAIG,YAAYA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACJ,YAAY,CAAC,cAAc,CAAC;EAAE;EAC/D,IAAII,YAAYA,CAACH,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,cAAc,EAAEiM,GAAG,CAAC;EAAE;EAEhE,IAAI3G,MAAMA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC0G,YAAY,CAAC,QAAQ,CAAC;EAAE;EACnD,IAAI1G,MAAMA,CAAC2G,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,QAAQ,EAAEiM,GAAG,CAAC;EAAE;EAEpD,IAAIzG,OAAOA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACwG,YAAY,CAAC,SAAS,CAAC;EAAE;EACrD,IAAIxG,OAAOA,CAACyG,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,SAAS,EAAEiM,GAAG,CAAC;EAAE;EAEtD,IAAIzN,IAAIA,CAAA,EAAG;IAAE,OAAO,IAAI,CAACwN,YAAY,CAAC,MAAM,CAAC;EAAE;EAC/C,IAAIxN,IAAIA,CAACyN,GAAG,EAAE;IAAE,IAAI,CAACjM,YAAY,CAAC,MAAM,EAAEiM,GAAG,CAAC;EAAE;EAEhD,IAAI7H,KAAKA,CAAA,EAAG;IAAE,OAAO,IAAI,CAAC,CAAC7E,YAAY,CAAC6E,KAAK;EAAE;EAC/C,IAAIA,KAAKA,CAAC6H,GAAG,EAAE;IAAE,IAAI,CAAC,CAAC1M,YAAY,CAAC6E,KAAK,GAAG6H,GAAG;EAAE;;EAEjD;AACJ;AACA;AACA;AACA;;EAEII,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,CAAC;IAEP,IAAI,CAAC,CAACpB,WAAW,GAAG,KAAK;IACzB,IAAI,CAAC,CAAClH,SAAS,GAAG,KAAK;IACvB,IAAI,CAAC,CAACjG,QAAQ,GAAG8M,QAAiB;IAElC,IAAI,CAAC,CAACM,cAAc,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,cAAc,EAAE,cAAc,EAAE,SAAS,EAAE,SAAS,CAAC;IAE5L,IAAI,CAAC,CAACC,kBAAkB,GAAG,IAAI;IAC/B,IAAI,CAAC,CAACC,QAAQ,GAAG,EAAE;IACnB,IAAI,CAAC,CAACC,UAAU,GAAG,IAAI;IAEvB,IAAI,CAAC,CAAC3E,iBAAiB,GAAG,MAAM;MAAE,IAAI,CAAC,CAAC+E,cAAc,CAAC,CAAC;IAAC,CAAC;IAC1D,IAAI,CAAC,CAACzH,WAAW,GAAG,MAAM;MACtB,IAAIyB,KAAK,GAAG,IAAI,CAACtF,cAAc,CAAC,CAAC;MACjC+C,oBAA4B,CAAC,IAAI,CAAC,CAACpF,QAAQ,EAAE2H,KAAK,EAAE,IAAI,CAAC,CAAClG,YAAY,EAAE,IAAI,CAAC,CAACkB,qBAAqB,CAAC;MACpG,IAAI,CAAC,CAAC0K,kBAAkB,GAAG1L,IAAI,CAACC,GAAG,CAAC,CAAC;IACzC,CAAC;IACD,IAAI,CAAC,CAACuE,WAAW,GAAG,MAAM;MACtB;AACZ;AACA;MACY,IAAI,IAAI,CAAC,CAAC1E,YAAY,CAAC6E,KAAK,KAAK,EAAE,EAAE;QACjC,IAAIlD,SAAS,GAAG,IAAI,CAAC,CAACT,qBAAqB,CAACG,aAAa,CAAC,aAAa,CAAC;QACxEM,SAAS,CAACF,SAAS,GAAG,EAAE;MAC5B;MAEA,IAAI,CAAC,CAACqK,UAAU,GAAGiB,WAAW,CAAC,YAAY;QACvC;AAChB;AACA;QACgB,IAAI,CAAC,IAAI,CAAC,CAACnB,kBAAkB,IAAK1L,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG,IAAK,IAAI,CAAC,CAACyL,kBAAkB,EAAE;UAC7E,IAAIjK,SAAS,GAAG,IAAI,CAAC,CAACT,qBAAqB,CAACG,aAAa,CAAC,aAAa,CAAC,CAACI,SAAS;UAClF,IAAIL,cAAc,GAAG,IAAI,CAAC,CAACF,qBAAqB,CAACG,aAAa,CAAC,kBAAkB,CAAC,CAACI,SAAS;;UAE5F;AACpB;UACoB,IAAI,IAAI,CAAC,CAACoK,QAAQ,KAAK,IAAI,CAAC,CAAC7L,YAAY,CAAC6E,KAAK,IAAIlD,SAAS,KAAKP,cAAc,EAAE;YAC7E,IAAI,CAAC,CAACyK,QAAQ,GAAG,IAAI,CAAC,CAAC7L,YAAY,CAAC6E,KAAK;YACzC,IAAI,CAACmI,cAAc,CAAC,CAAC;UACzB;QACJ;MACJ,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;IACvB,CAAC;IACD,IAAI,CAAC,CAACtI,UAAU,GAAG,MAAM;MACrBuI,aAAa,CAAC,IAAI,CAAC,CAACpB,UAAU,CAAC;MAC/B;MACA,IAAI,IAAI,CAAC,CAACD,QAAQ,KAAK,IAAI,CAAC,CAAC7L,YAAY,CAAC6E,KAAK,EAAE;QAC7C,IAAI,CAAC,CAACgH,QAAQ,GAAG,IAAI,CAAC,CAAC7L,YAAY,CAAC6E,KAAK;QACzC,IAAI,CAACmI,cAAc,CAAC,CAAC;MACzB;IACJ,CAAC;IACD,IAAI,CAAC,CAACpI,cAAc,GAAG,MAAM;MACzB,IAAI,CAACoI,cAAc,CAAC,CAAC;IACzB,CAAC;EACL;;EAEA;AACJ;AACA;AACA;AACA;;EAEIG,eAAeA,CAAA,EAAG;IACd,OAAO,IAAI,CAAC,CAACpN,YAAY;EAC7B;EAEAqN,eAAeA,CAAA,EAAG;IACd,OAAO,IAAI,CAAC,CAACpN,YAAY;EAC7B;EAEAxB,cAAcA,CAACE,WAAW,EAAE;IACxB2M,cAAuB,CAAC,IAAI,CAAC,CAAC9M,QAAQ,EAAEG,WAAW,CAAC;;IAEpD;IACA,IAAI2O,kBAAkB,GAAG3O,WAAW,CAAC,WAAW,CAAC,KAAKK,SAAS,IAAIW,WAAW,CAAC,IAAI,CAACuE,KAAK,CAAC;IAC1F,IAAIqJ,iBAAiB,GAAG5O,WAAW,CAAC,UAAU,CAAC,KAAKK,SAAS,IAAIW,WAAW,CAAC,IAAI,CAAC4E,KAAK,CAAC,IAAI,IAAI,CAACuD,YAAY,CAAC,YAAY,CAAC;IAC3H,IAAI0F,qBAAqB,GAAG7O,WAAW,CAAC,cAAc,CAAC,KAAKK,SAAS,IAAIW,WAAW,CAAC,IAAI,CAAC4E,KAAK,CAAC,IAAI,IAAI,CAACuD,YAAY,CAAC,cAAc,CAAC;IACrI,IAAI2F,qBAAqB,GAAG9O,WAAW,CAAC,cAAc,CAAC,KAAKK,SAAS,IAAIW,WAAW,CAAC,IAAI,CAAC4E,KAAK,CAAC,IAAI,IAAI,CAACuD,YAAY,CAAC,cAAc,CAAC;IACrI,IAAI4F,uBAAuB,GAAG/O,WAAW,CAAC,sBAAsB,CAAC,IAAIA,WAAW,CAAC,wBAAwB,CAAC,IAC5EA,WAAW,CAAC,0BAA0B,CAAC,IAAIA,WAAW,CAAC,4BAA4B,CAAC;IAClH,IAAIgP,0BAA0B,GAAGhP,WAAW,CAAC,mBAAmB,CAAC,KAAKK,SAAS,IAAIK,cAAc,CAAC,IAAI,CAACmF,OAAO,CAAC;IAC/G,IAAIoJ,qBAAqB,GAAGjP,WAAW,CAAC,iBAAiB,CAAC,KAAKK,SAAS;;IAExE;IACA,IAAIsO,kBAAkB,EAAE;MACpB1J,kBAA0B,CAAC,IAAI,CAAC,CAAC3B,YAAY,EAAE,IAAI,CAACiC,KAAK,EAAE,IAAI,CAAC,CAAC1F,QAAQ,CAAC,WAAW,CAAC,CAAC;IAC3F;IACA,IAAI+O,iBAAiB,EAAE;MACnB3J,gBAAwB,CAAC,IAAI,CAAC,CAACjB,iBAAiB,EAAE,IAAI,CAAC4B,KAAK,EAAE,IAAI,CAAC,CAAC/F,QAAQ,CAAC,UAAU,CAAC,CAAC;IAC7F;IACA,IAAIgP,qBAAqB,EAAE;MACvB5J,mBAA2B,CAAC,IAAI,CAAC,CAAC5D,YAAY,EAAE,IAAI,CAACuE,KAAK,EAAE,IAAI,CAAC,CAAC/F,QAAQ,CAAC,cAAc,CAAC,CAAC;IAC/F;IACA,IAAIiP,qBAAqB,EAAE;MACvB7J,mBAA2B,CAAC,IAAI,CAAC,CAAC5D,YAAY,EAAE,IAAI,CAACuE,KAAK,EAAE,IAAI,CAAC,CAAC/F,QAAQ,CAAC,cAAc,CAAC,CAAC;IAC/F;IACA,IAAIkP,uBAAuB,EAAE;MACzB;MACA,IAAIG,YAAY,GAAG,IAAI,CAAC,CAAC1M,qBAAqB,CAACG,aAAa,CAAC,YAAY,CAAC,CAACI,SAAS;MACpF,IAAI,CAAC,CAACP,qBAAqB,CAACO,SAAS,GACjC,0BAA0B,GAAGmM,YAAY,GAAG,SAAS,GACrD,oEAAoE,GACpE,kCAAkC;MACtC,IAAI,CAACZ,cAAc,CAAC,CAAC;MACrB,IAAI,CAAC,CAAC9L,qBAAqB,CAACG,aAAa,CAAC,aAAa,CAAC,CAACZ,YAAY,CAAC,WAAW,EAAE,QAAQ,CAAC;IAChG;IACA,IAAIiN,0BAA0B,EAAE;MAC5B,IAAI,CAAC,CAACxM,qBAAqB,CAACG,aAAa,CAAC,YAAY,CAAC,CAACI,SAAS,GAAG,IAAI,CAAC,CAAClD,QAAQ,CAAC,mBAAmB,CAAC,CAACyC,OAAO,CAAC,SAAS,EAAE,IAAI,CAACuD,OAAO,CAAC;IAC5I;IACA,IAAIoJ,qBAAqB,EAAE;MACvB,IAAI,CAAC,CAACxL,cAAc,CAACd,aAAa,CAAC,QAAQ,CAAC,CAACZ,YAAY,CAAC,YAAY,EAAE,IAAI,CAAC,CAAClC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;IAC9G;EACJ;EAEAqC,cAAcA,CAAA,EAAG;IACb,IAAIxB,cAAc,CAAC,IAAI,CAACmF,OAAO,CAAC,EAAE;MAC9B,IAAIsJ,aAAa,GAAG,IAAI,CAAC,CAAC7N,YAAY,CAAC6E,KAAK,CAACG,MAAM;MACnD,OAAOzF,QAAQ,CAAC,IAAI,CAACgF,OAAO,CAAC,GAAGsJ,aAAa;IACjD,CAAC,MACI;MACD,OAAO9O,SAAS;IACpB;EACJ;EAEAiO,cAAcA,CAAA,EAAG;IACb,IAAI5N,cAAc,CAAC,IAAI,CAACmF,OAAO,CAAC,EAAE;MAC9B,IAAI2B,KAAK,GAAG,IAAI,CAACtF,cAAc,CAAC,CAAC;MACjC+C,oBAA4B,CAAC,IAAI,CAAC,CAACpF,QAAQ,EAAE2H,KAAK,EAAE,IAAI,CAAC,CAAClG,YAAY,EAAE,IAAI,CAAC,CAACkB,qBAAqB,CAAC;MACpGyC,eAAuB,CAAC,IAAI,CAAC,CAACpF,QAAQ,EAAE2H,KAAK,EAAE,IAAI,CAAC,CAAChF,qBAAqB,CAAC;IAC/E;EACJ;;EAEA;AACJ;AACA;AACA;AACA;;EAEI4M,iBAAiBA,CAAA,EAAG;IAEhB,IAAI,IAAI,CAACxJ,KAAK,KAAK,IAAI,IAAI,IAAI,CAACoB,IAAI,KAAK,IAAI,EAAE;MAC3C,MAAM,IAAIhC,KAAK,CAAC,qGAAqG,CAAC;IAC1H,CAAC,MACI,IAAI,IAAI,CAACjC,SAAS,KAAK,EAAE,EAAE;MAC5B,MAAM,IAAIiC,KAAK,CAAC,+FAA+F,CAAC;IACpH,CAAC,MACI;MACD;MACA,IAAI,CAAChE,WAAW,CAAC,IAAI,CAAC2E,OAAO,CAAC,EAAE;QAC5BV,iBAAyB,CAAC,IAAI,CAAC,CAAC5D,YAAY,EAAE,IAAI,CAAC,CAACC,YAAY,CAAC;MACrE;;MAEA;MACA,IAAI,CAAChB,WAAW,CAAC,IAAI,CAACC,IAAI,CAAC,EAAE;QACzB0E,cAAsB,CAAC,IAAI,CAAC,CAAC3D,YAAY,CAAC;MAC9C;MAEA,IAAI,CAAC,CAAC+L,cAAc,CAAC,CAAC;MACtB,IAAI,CAACE,WAAW,CAAC,IAAI,CAAC,CAAC/H,cAAc,CAAC;MAEtC,IAAI9E,cAAc,CAAC,IAAI,CAACmF,OAAO,CAAC,EAAE;QAC9B,IAAI,CAAC,CAACvE,YAAY,CAACiF,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAACR,WAAW,EAAE,KAAK,CAAC;QACtE,IAAI,CAAC,CAACzE,YAAY,CAACiF,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAACP,WAAW,EAAE,KAAK,CAAC;QACtE,IAAI,CAAC,CAAC1E,YAAY,CAACiF,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,CAACN,UAAU,EAAE,KAAK,CAAC;QACpEO,MAAM,CAACD,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,CAACL,cAAc,EAAE,KAAK,CAAC;MACpE;MAEA,IAAI,CAAC,CAACJ,SAAS,GAAG,IAAI;IAC1B;EACJ;;EAEA;AACJ;AACA;AACA;AACA;;EAEIuJ,oBAAoBA,CAAA,EAAG,CAAE;;EAEzB;AACJ;AACA;AACA;AACA;;EAEIC,wBAAwBA,CAACC,SAAS,EAAEpC,QAAQ,EAAEhI,QAAQ,EAAE;IAEpD;AACR;;IAEQ,IAAI,CAAC,IAAI,CAAC,CAAC6H,WAAW,EAAE;MACpB,IAAI,CAAC,CAACxH,cAAc,GAAUqH,oBAA0B,CAAC,CAAC;MAC1D,IAAI,CAAC,CAACxL,YAAY,GAAYwL,kBAAwB,CAAC,CAAC;MACxD,IAAI,CAAC,CAACpJ,cAAc,GAAUoJ,oBAA0B,CAAC,IAAI,CAAC,CAAChN,QAAQ,CAAC;MACxE,IAAI,CAAC,CAACsD,eAAe,GAAS0J,qBAA2B,CAAC,CAAC;MAC3D,IAAI,CAAC,CAACvJ,YAAY,GAAYuJ,kBAAwB,CAAC,CAAC;MACxD,IAAI,CAAC,CAAC1E,kBAAkB,GAAM0E,wBAA8B,CAAC,CAAC;MAC9D,IAAI,CAAC,CAACvH,mBAAmB,GAAKuH,yBAA+B,CAAC,CAAC;MAC/D,IAAI,CAAC,CAAC3F,aAAa,GAAW2F,mBAAyB,CAAC,CAAC;MACzD,IAAI,CAAC,CAACvL,YAAY,GAAYuL,kBAAwB,CAAC,CAAC;MACxD,IAAI,CAAC,CAACvF,aAAa,GAAWuF,mBAAyB,CAAC,CAAC;MACzD,IAAI,CAAC,CAAC7I,iBAAiB,GAAO6I,uBAA6B,CAAC,IAAI,CAAC,CAACpE,iBAAiB,CAAC;MACpF,IAAI,CAAC,CAACjG,qBAAqB,GAAGqK,2BAAiC,CAAC,CAAC;MAEjE,IAAI,CAAC,CAACG,WAAW,GAAG,IAAI;IAC5B;;IAEA;;IAEA,IAAIuC,SAAS,KAAK,cAAc,EAAE;MAC9B3C,YAAkC,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,CAAC;IACpE;IAEA,IAAIiO,SAAS,KAAK,UAAU,EAAE;MAC1B3C,QAA8B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC9D,YAAY,EAAE,IAAI,CAAC,CAACC,YAAY,EAAE,IAAI,CAAC,CAACgE,mBAAmB,CAAC;IAC/G;;IAEA;;IAEA,IAAIiK,SAAS,KAAK,OAAO,EAAE;MACvB3C,KAA2B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAACK,cAAc,EAAE,IAAI,CAAC,CAAClE,YAAY,CAAC;IACnF;IAEA,IAAIiO,SAAS,KAAK,UAAU,EAAE;MAC1B3C,QAA8B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAChC,eAAe,CAAC;IACnE;IAEA,IAAIoM,SAAS,KAAK,SAAS,EAAE;MACzB3C,OAA6B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC9D,YAAY,EAAE,IAAI,CAAC,CAACC,YAAY,CAAC;IACnF;IAEA,IAAIiO,SAAS,KAAK,OAAO,EAAE;MACvB3C,KAA2B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC9D,YAAY,CAAC;IAC7D;IAEA,IAAIkO,SAAS,KAAK,SAAS,EAAE;MACzB3C,OAA6B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,EAAE,IAAI,CAAC,CAACkB,qBAAqB,EAAE,IAAI,CAAC,CAACsD,SAAS,EAAE,IAAI,CAAC,CAACjG,QAAQ,EAAE,IAAI,CAAC,CAACkG,WAAW,EAAE,IAAI,CAAC,CAACC,WAAW,EAAE,IAAI,CAAC,CAACC,UAAU,EAAE,IAAI,CAAC,CAACC,cAAc,EAAE,IAAI,CAACC,KAAK,EAAE,IAAI,CAAC+D,QAAQ,CAAC,IAAI,CAAC,CAAC1H,qBAAqB,CAAC,CAAC;IACnQ;IAEA,IAAI+M,SAAS,KAAK,UAAU,EAAE;MAC1B3C,QAA8B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,CAAC;IAChE;IAEA,IAAIiO,SAAS,KAAK,MAAM,EAAE;MACtB3C,gCAA0B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,CAAC;IAC5D;IAEA,IAAIiO,SAAS,KAAK,QAAQ,EAAE;MACxB3C,MAA4B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAACG,mBAAmB,EAAE,IAAI,CAAC,CAAC4B,aAAa,CAAC;IAC1F;IAEA,IAAIqI,SAAS,KAAK,UAAU,EAAE;MAC1B3C,QAA8B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,EAAE,IAAI,CAAC,CAACgE,mBAAmB,CAAC;IAC3F;IAEA,IAAIiK,SAAS,KAAK,UAAU,EAAE;MAC1B3C,QAA8B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,CAAC;IAChE;;IAEA;;IAEA;;IAEA,IAAIiO,SAAS,KAAK,QAAQ,EAAE;MACxB3C,MAA4B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAACG,mBAAmB,EAAE,IAAI,CAAC,CAACgC,aAAa,CAAC;IAC1F;IAEA,IAAIiI,SAAS,KAAK,SAAS,EAAE;MACzB3C,OAA6B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC1B,cAAc,CAAC;IACjE;IAEA,IAAI8L,SAAS,KAAK,MAAM,EAAE;MACtB3C,IAA0B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,CAAC;IAC5D;IAEA,IAAIiO,SAAS,KAAK,OAAO,EAAE;MACvB3C,KAA2B,CAACzH,QAAQ,EAAE,IAAI,CAAC,CAAC7D,YAAY,EAAE,IAAI,CAAC,CAACkB,qBAAqB,EAAE,IAAI,CAAC,CAACsD,SAAS,EAAE,IAAI,CAAC,CAACjG,QAAQ,EAAE,IAAI,CAACgG,OAAO,CAAC;IACzI;IAEAZ,2BAAmC,CAC/BjE,WAAW,CAAC,IAAI,CAACuE,KAAK,CAAC,EACvB,IAAI,CAAC4D,YAAY,CAAC,UAAU,CAAC,EAC7B,IAAI,CAACA,YAAY,CAAC,UAAU,CAAC,EAC7B,IAAI,CAACA,YAAY,CAAC,UAAU,CAAC,EAC7B,IAAI,CAACA,YAAY,CAAC,cAAc,CAAC,EACjC,IAAI,CAACA,YAAY,CAAC,cAAc,CAAC,EACjCzI,cAAc,CAAC,IAAI,CAACmF,OAAO,CAC/B,CAAC;;IAED;;IAEA,IAAI,IAAI,CAAC,CAACoH,cAAc,CAACxM,QAAQ,CAAC8O,SAAS,CAAC,IAAI,IAAI,CAAC,CAACvC,WAAW,IAAI,IAAI,CAAC,CAAClH,SAAS,EAAE;MAClF,IAAI,CAAC,CAACuH,cAAc,CAAC,CAAC;IAC1B;EACJ;AACJ;AAEA,gDAAeP,QAAQ;;ACthBsC;AAE7D,IAAI0C,cAAc,CAACC,GAAG,CAAC,WAAW,CAAC,KAAKpP,SAAS,EAAE;EAC/CmG,MAAM,CAACgJ,cAAc,CAACE,MAAM,CAAC,WAAW,EAAE5C,SAAQ,CAAC;AACvD,C","sources":["webpack://dkfds/./src/js/custom-elements/fds-input/fds-input-glossary.js","webpack://dkfds/./src/js/custom-elements/fds-input/fds-input-attribute-validators.js","webpack://dkfds/./src/js/custom-elements/fds-input/fds-input-helpers.js","webpack://dkfds/./src/js/custom-elements/fds-input/fds-input-attribute-changes.js","webpack://dkfds/./src/js/custom-elements/fds-input/fds-input-build-element.js","webpack://dkfds/./src/js/components/tooltip.js","webpack://dkfds/./src/js/custom-elements/fds-input/fds-input.js","webpack://dkfds/./src/js/dkfds-custom-elements.js"],"sourcesContent":["'use strict';\r\n\r\nexport let glossary = {\r\n    'errorText': 'Fejl',\r\n    'editText': 'Rediger',\r\n    'requiredText': 'skal udfyldes',\r\n    'optionalText': 'frivilligt',\r\n    'oneCharacterLeftText': 'Du har {value} tegn tilbage',\r\n    'manyCharactersLeftText': 'Du har {value} tegn tilbage',\r\n    'oneCharacterExceededText': 'Du har {value} tegn for meget',\r\n    'manyCharactersExceededText': 'Du har {value} tegn for meget',\r\n    'maxCharactersText': 'Du kan indtaste op til {value} tegn',\r\n    'tooltipIconText': 'LÃ¦s mere'\r\n};\r\n\r\nexport function updateGlossary(oldGlossary, newGlossary) {\r\n    let keys = Object.keys(newGlossary);\r\n    keys.forEach((key) => {\r\n        if (oldGlossary[key] !== undefined) {\r\n            oldGlossary[key] = newGlossary[key]\r\n        }\r\n    });\r\n}","'use strict';\r\n\r\nexport function isValidType(type) {\r\n    const TYPES = ['text', 'email', 'number', 'password', 'tel', 'url'];\r\n\r\n    if (TYPES.includes(type)) { \r\n        return true; \r\n    }\r\n    else { \r\n        return false; \r\n    }\r\n}\r\n\r\nexport function isValidInteger(integer) {\r\n    let number = parseInt(integer);\r\n    return Number.isInteger(number);\r\n}\r\n\r\nexport function isValidText(s) {\r\n    // If s is falsy, it is not a non-empty string\r\n    if (!s) {\r\n        return false;\r\n    }\r\n    // If s is a string, check that it doesn't contain only whitespace\r\n    else if (typeof s === 'string' || s instanceof String) {\r\n        if (s.trim() === '') {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    // s is not a string\r\n    else {\r\n        return false;\r\n    }\r\n}","'use strict';\r\n\r\n/* \r\nFUNCTIONS FOR DEFAULT SETTINGS\r\n*/\r\n\r\nexport function setDefaultInputId(labelElement, inputElement) {\r\n    let randomString = 'input-' + Date.now().toString().slice(-3) + Math.floor(Math.random() * 1000000).toString();\r\n    labelElement.setAttribute('for', randomString);\r\n    inputElement.setAttribute('id', randomString);\r\n}\r\n\r\nexport function setDefaultType(inputElement) {\r\n    inputElement.setAttribute('type', 'text');\r\n}\r\n\r\n/* \r\nCHARACTER LIMIT\r\n*/\r\n\r\nfunction characterLimitMessage(glossary, charactersLeft) {\r\n    let message = \"\";\r\n\r\n    if (charactersLeft === -1) {\r\n        let exceeded = Math.abs(charactersLeft);\r\n        message = glossary['oneCharacterExceededText'].replace(/{value}/, exceeded);\r\n    }\r\n    else if (charactersLeft === 1) {\r\n        message = glossary['oneCharacterLeftText'].replace(/{value}/, charactersLeft);\r\n    }\r\n    else if (charactersLeft >= 0) {\r\n        message = glossary['manyCharactersLeftText'].replace(/{value}/, charactersLeft);\r\n    }\r\n    else {\r\n        let exceeded = Math.abs(charactersLeft);\r\n        message = glossary['manyCharactersExceededText'].replace(/{value}/, exceeded);\r\n    }\r\n\r\n    return message;\r\n}\r\n\r\nexport function updateVisibleMessage(glossary, charactersLeft, inputElement, characterLimitElement) {\r\n    let newMessage = characterLimitMessage(glossary, charactersLeft);\r\n    let visibleMessage = characterLimitElement.querySelector('.visible-message');\r\n\r\n    if (charactersLeft < 0) {\r\n        visibleMessage.classList.add('limit-exceeded');\r\n        inputElement.classList.add('form-limit-error');\r\n    }\r\n    else {\r\n        visibleMessage.classList.remove('limit-exceeded');\r\n        inputElement.classList.remove('form-limit-error');\r\n    }\r\n\r\n    visibleMessage.innerHTML = newMessage;\r\n}\r\n\r\nexport function updateSRMessage(glossary, charactersLeft, characterLimitElement) {\r\n    let newMessage = characterLimitMessage(glossary, charactersLeft);\r\n    let srMessage = characterLimitElement.querySelector('.sr-message');\r\n    srMessage.innerHTML = newMessage;\r\n}\r\n\r\n/* \r\nREMAINING HELPERS\r\n*/\r\n\r\nexport function setHelptextId(helptextElement, inputElement) {\r\n    helptextElement.id = inputElement.id + '-helptext';\r\n}\r\n\r\nexport function setErrorId(errorElement, inputElement) {\r\n    errorElement.id = inputElement.id + '-error';\r\n}\r\n\r\nexport function setCharacterLimitId(characterLimitElement, inputElement) {\r\n    characterLimitElement.querySelector('.max-limit').id = inputElement.id + '-limit';\r\n}\r\n\r\nexport function setTooltipId(tooltipElement, inputElement) {\r\n    tooltipElement.dataset.tooltipId = inputElement.id + '-tooltip';;\r\n}\r\n\r\nexport function updateErrorMessage(errorElement, errorText, srText) {\r\n    errorElement.innerHTML = '<span class=\"sr-only\">' + srText + ': </span>' + errorText;\r\n}\r\n\r\nexport function updateEditButton(editButtonElement, labelText, editText) {\r\n    editButtonElement.innerHTML = '<svg class=\"icon-svg\" focusable=\"false\" aria-hidden=\"true\"><use xlink:href=\"#mode\"></use></svg>' + editText + '<span class=\"sr-only\"> ' + labelText + '</span>';\r\n}\r\n\r\nexport function updateRequiredLabel(labelElement, labelText, requiredText) {\r\n    labelElement.innerHTML = labelText + '<span class=\"weight-normal\"> (*' + requiredText + ')</span>';\r\n}\r\n\r\nexport function updateOptionalLabel(labelElement, labelText, optionalText) {\r\n    labelElement.innerHTML = labelText + '<span class=\"weight-normal\"> (' + optionalText + ')</span>';\r\n}\r\n\r\nexport function checkDisallowedCombinations(hasError, isRequired, isReadonly, isDisabled, showRequired, showOptional, hasMaxChar) {\r\n    let isOptional = !isRequired;\r\n    if (hasError && isDisabled) {\r\n        throw new Error(`'error' and 'disabled' attributes must not both present on fds-input.`);\r\n    }\r\n    if (hasError && isReadonly) {\r\n        throw new Error(`'error' and 'readonly' attributes must not both present on fds-input.`);\r\n    }\r\n    if (isRequired && isDisabled) {\r\n        throw new Error(`'required' and 'disabled' attributes must not both present on fds-input.`);\r\n    }\r\n    if (isRequired && isReadonly) {\r\n        throw new Error(`'required' and 'readonly' attributes must not both present on fds-input.`);\r\n    }\r\n    if (isOptional && showRequired) {\r\n        throw new Error(`'required' label must not be displayed on optional fds-input.`);\r\n    }\r\n    if (isRequired && showOptional) {\r\n        throw new Error(`'optional' label must not be displayed on required fds-input.`);\r\n    }\r\n    if (showRequired && showOptional) {\r\n        throw new Error(`Show only 'optional' or 'required' label on fds-input.`);\r\n    }\r\n    if (hasMaxChar && isDisabled) {\r\n        throw new Error(`'maxchar' and 'disabled' attributes must not both present on fds-input.`);\r\n    }\r\n    if (hasMaxChar && isReadonly) {\r\n        throw new Error(`'maxchar' and 'readonly' attributes must not both present on fds-input.`);\r\n    }\r\n}","'use strict';\r\n\r\nimport {isValidText, isValidInteger, isValidType} from './fds-input-attribute-validators';\r\nimport * as Helpers from './fds-input-helpers';\r\n\r\nexport function autocomplete(newValue, inputElement) {\r\n    // Attribute changed to valid value\r\n    if (isValidText(newValue)) {\r\n        inputElement.setAttribute('autocomplete', newValue);\r\n    }\r\n    // Attribute removed or invalid value\r\n    else {\r\n        inputElement.removeAttribute('autocomplete');\r\n    }\r\n}\r\n\r\nexport function disabled(newValue, labelElement, inputElement, inputWrapperElement) {\r\n    // Attribute changed\r\n    if (newValue !== null) {\r\n        labelElement.classList.add('disabled');\r\n        inputElement.setAttribute('disabled', '');\r\n        inputWrapperElement.classList.add('disabled');\r\n    }\r\n    // Attribute removed\r\n    else {\r\n        labelElement.classList.remove('disabled');\r\n        inputElement.removeAttribute('disabled');\r\n        inputWrapperElement.classList.remove('disabled');\r\n    }\r\n}\r\n\r\nexport function error(newValue, wrapperElement, inputElement) {\r\n    // Attribute changed\r\n    if (isValidText(newValue)) {\r\n        wrapperElement.classList.add('form-error');\r\n        inputElement.setAttribute('aria-invalid', 'true');\r\n    }\r\n    // Attribute removed\r\n    else {\r\n        wrapperElement.classList.remove('form-error');\r\n        inputElement.removeAttribute('aria-invalid');\r\n    }\r\n}\r\n\r\nexport function helptext(newValue, helptextElement) {\r\n    // Attribute changed to valid value\r\n    if (isValidText(newValue)) {\r\n        helptextElement.textContent = newValue;\r\n    }\r\n    // Attribute removed or invalid value\r\n    else {\r\n        helptextElement.textContent = '';\r\n    }\r\n}\r\n\r\nexport function inputid(newValue, labelElement, inputElement) {\r\n    // Attribute changed to valid value\r\n    if (isValidText(newValue)) {\r\n        labelElement.setAttribute('for', newValue);\r\n        inputElement.setAttribute('id', newValue);\r\n    }\r\n    // Attribute removed or invalid value\r\n    else {\r\n        Helpers.setDefaultInputId(labelElement, inputElement);\r\n    }\r\n}\r\n\r\nexport function label(newValue, labelElement) {\r\n    // Attribute changed\r\n    if (newValue !== null) {\r\n        if (isValidText(newValue)) {\r\n            labelElement.textContent = newValue;\r\n        }\r\n        else {\r\n            throw new Error(`Invalid label attribute '${newValue}'.`);\r\n        }\r\n    }\r\n    // Do nothing on attribute removed to avoid throwing an error in those  \r\n    // rare cases where two calls are made to attributeChangedCallback()\r\n}\r\n\r\nexport function maxchar(newValue, inputElement, characterLimitElement, connected, glossary, handleKeyUp, handleFocus, handleBlur, handlePageShow, value, containsCharacterLimit) {\r\n    // Attribute changed\r\n    if (isValidInteger(newValue)) {\r\n        characterLimitElement.querySelector('.max-limit').innerHTML = glossary['maxCharactersText'].replace(/{value}/, newValue);\r\n\r\n        let charactersRemaining = newValue;\r\n        if (value) {\r\n            charactersRemaining = parseInt(newValue) - value.length;\r\n        }\r\n        Helpers.updateVisibleMessage(glossary, charactersRemaining, inputElement, characterLimitElement);\r\n        Helpers.updateSRMessage(glossary, charactersRemaining, characterLimitElement);\r\n    }\r\n\r\n    // Attribute added\r\n    if (connected && !containsCharacterLimit && isValidInteger(newValue)) {\r\n        inputElement.addEventListener('keyup', handleKeyUp, false);\r\n        inputElement.addEventListener('focus', handleFocus, false);\r\n        inputElement.addEventListener('blur', handleBlur, false);\r\n        window.addEventListener('pageshow', handlePageShow, false);\r\n    }\r\n    // Attribute removed or invalid\r\n    else if (connected && containsCharacterLimit && !isValidInteger(newValue)) {\r\n        inputElement.removeEventListener('keyup', handleKeyUp, false);\r\n        inputElement.removeEventListener('focus', handleFocus, false);\r\n        inputElement.removeEventListener('blur', handleBlur, false);\r\n        window.removeEventListener('pageshow', handlePageShow, false);\r\n    }\r\n}\r\n\r\nexport function maxwidth(newValue, inputElement) {\r\n    // Attribute changed\r\n    if (isValidInteger(newValue)) {\r\n        let paddingPixels = 30; // Input padding-left and padding-right are 15px\r\n        let borderPixels =   4; // Input border-left and border-right are 2px (worst case)\r\n        inputElement.style.maxWidth = 'calc(' + parseInt(newValue) + 'ch + ' + (paddingPixels + borderPixels) + 'px)';  \r\n        inputElement.style.width = '100%';\r\n    }\r\n    // Attribute removed\r\n    else {\r\n        inputElement.style.maxWidth = '';\r\n        inputElement.style.width = '';\r\n    }\r\n}\r\n\r\nexport function name(newValue, inputElement) {\r\n    // Attribute changed\r\n    if (newValue !== null) {\r\n        if (isValidText(newValue)) {\r\n            inputElement.setAttribute('name', newValue);\r\n        }\r\n        else {\r\n            throw new Error(`Invalid name attribute '${newValue}'.`);\r\n        }\r\n    }\r\n    // Do nothing on attribute removed to avoid throwing an error in those  \r\n    // rare cases where two calls are made to attributeChangedCallback()\r\n}\r\n\r\nexport function prefix(newValue, inputWrapperElement, prefixElement) {\r\n    // Attribute changed to valid value\r\n    if (isValidText(newValue)) {\r\n        inputWrapperElement.classList.add('form-input-wrapper--prefix');\r\n        prefixElement.textContent = newValue;\r\n    }\r\n    // Attribute removed or invalid value\r\n    else {\r\n        inputWrapperElement.classList.remove('form-input-wrapper--prefix');\r\n    }\r\n}\r\n\r\nexport function readonly(newValue, inputElement, inputWrapperElement) {\r\n    // Attribute changed\r\n    if (newValue !== null) {\r\n        inputElement.setAttribute('readonly', '');\r\n        inputWrapperElement.classList.add('readonly');\r\n    }\r\n    // Attribute removed\r\n    else {\r\n        inputElement.removeAttribute('readonly');\r\n        inputWrapperElement.classList.remove('readonly');\r\n    }\r\n}\r\n\r\nexport function required(newValue, inputElement) {\r\n    // Attribute changed\r\n    if (newValue !== null) {\r\n        inputElement.setAttribute('required', '');\r\n    }\r\n    // Attribute removed\r\n    else {\r\n        inputElement.removeAttribute('required');\r\n    }\r\n}\r\n\r\nexport function suffix(newValue, inputWrapperElement, suffixElement) {\r\n    // Attribute changed\r\n    if (isValidText(newValue)) {\r\n        inputWrapperElement.classList.add('form-input-wrapper--suffix');\r\n        suffixElement.textContent = newValue;\r\n    }\r\n    // Attribute removed\r\n    else {\r\n        inputWrapperElement.classList.remove('form-input-wrapper--suffix');\r\n    }\r\n}\r\n\r\nexport function tooltip(newValue, tooltipElement) {\r\n    // Attribute changed\r\n    if (isValidText(newValue)) {\r\n        tooltipElement.dataset.tooltip = newValue;\r\n    }\r\n}\r\n\r\nexport function type(newValue, inputElement) {\r\n    // Attribute changed to text\r\n    if (isValidText(newValue)) {\r\n        if (isValidType(newValue)) {\r\n            inputElement.setAttribute('type', newValue);\r\n        }\r\n        else {\r\n            throw new Error(`Invalid type attribute '${newValue}'.`);\r\n        }\r\n    }\r\n    // Attribute removed or changed to non-text\r\n    else {\r\n        Helpers.setDefaultType(inputElement);\r\n    }\r\n}\r\n\r\nexport function value(newValue, inputElement, characterLimitElement, connected, glossary, maxchar) {\r\n    // Attribute changed\r\n    if (newValue !== null) {\r\n        inputElement.setAttribute('value', newValue);\r\n    }\r\n    // Attribute removed\r\n    else {\r\n        inputElement.removeAttribute('value');\r\n    }\r\n    // Ensure character limit shows the correct number of remaining characters at element creation\r\n    if (!connected && isValidInteger(maxchar)) {\r\n        let chars = parseInt(maxchar) - newValue.length;\r\n        Helpers.updateVisibleMessage(glossary, chars, inputElement, characterLimitElement);\r\n        Helpers.updateSRMessage(glossary, chars, characterLimitElement);\r\n    }\r\n}","'use strict';\r\n\r\nimport {isValidText, isValidInteger} from './fds-input-attribute-validators';\r\n\r\n/* Functions for initial creation of fds-input elements */\r\n\r\nexport function createWrapperElement() {\r\n    let wrapperElement = document.createElement('div');\r\n    wrapperElement.classList.add('form-group');\r\n    return wrapperElement;\r\n}\r\n\r\nexport function createLabelElement() {\r\n    let labelElement = document.createElement('label');\r\n    labelElement.classList.add('form-label');\r\n    return labelElement;\r\n}\r\n\r\nexport function createTooltipElement(glossary) {\r\n    let tooltipElement = document.createElement('span');\r\n    tooltipElement.classList.add('tooltip-wrapper', 'custom-element-tooltip', 'ml-2');\r\n    tooltipElement.dataset.tooltip = '';\r\n    tooltipElement.dataset.tooltipId = '';\r\n    tooltipElement.dataset.position = 'above';\r\n    tooltipElement.dataset.trigger = 'click';\r\n    tooltipElement.innerHTML = \r\n        '<button class=\"button button-unstyled tooltip-target\" type=\"button\" aria-label=\"' + glossary['tooltipIconText'] + '\">' + \r\n            '<svg class=\"icon-svg mr-0 mt-0\" focusable=\"false\" aria-hidden=\"true\"><use xlink:href=\"#help\"></use></svg>' + \r\n        '</button>';\r\n    return tooltipElement;\r\n}\r\n\r\nexport function createHelptextElement() {\r\n    let helptextElement = document.createElement('span');\r\n    helptextElement.classList.add('form-hint');\r\n    return helptextElement;\r\n}\r\n\r\nexport function createErrorElement() {\r\n    let errorElement = document.createElement('span');\r\n    errorElement.classList.add('form-error-message');\r\n    return errorElement;\r\n}\r\n\r\nexport function createEditWrapperElement() {\r\n    let editWrapperElement = document.createElement('div');\r\n    editWrapperElement.classList.add('edit-wrapper');\r\n    return editWrapperElement;\r\n}\r\n\r\nexport function createInputWrapperElement() {\r\n    let inputWrapperElement = document.createElement('div');\r\n    inputWrapperElement.classList.add('form-input-wrapper');\r\n    return inputWrapperElement;\r\n}\r\n\r\nexport function createPrefixElement() {\r\n    let prefixElement = document.createElement('div');\r\n    prefixElement.classList.add('form-input-prefix');\r\n    prefixElement.setAttribute('aria-hidden', 'true');\r\n    return prefixElement;\r\n}\r\n\r\nexport function createInputElement() {\r\n    let inputElement = document.createElement('input');\r\n    inputElement.classList.add('form-input');\r\n    return inputElement;\r\n}\r\n\r\nexport function createSuffixElement() {\r\n    let suffixElement = document.createElement('div');\r\n    suffixElement.classList.add('form-input-suffix');\r\n    suffixElement.setAttribute('aria-hidden', 'true');\r\n    return suffixElement;\r\n}\r\n\r\nexport function createEditButtonElement(handleEditClicked) {\r\n    let editButtonElement = document.createElement('button');\r\n    editButtonElement.setAttribute('type', 'button');\r\n    editButtonElement.classList.add('function-link', 'edit-button');\r\n    editButtonElement.addEventListener('click', handleEditClicked, false);\r\n    return editButtonElement;\r\n}\r\n\r\nexport function createCharacterLimitElement() {\r\n    let characterLimitElement = document.createElement('div');\r\n    characterLimitElement.classList.add('character-limit-wrapper');\r\n    characterLimitElement.innerHTML = \r\n        '<span class=\"max-limit\"></span>' + \r\n        '<span class=\"visible-message form-hint\" aria-hidden=\"true\"></span>' + \r\n        '<span class=\"sr-message\" aria-live=\"polite\"></span>';\r\n    return characterLimitElement;\r\n}\r\n\r\n/* Functions for rebuilding fds-input */\r\n\r\nexport function setInputAriaDescribedBy(error, helptext, maxchar, errorElement, helptextElement, characterLimitElement, inputElement) {\r\n    let ariaDescribedBy = '';\r\n    if (isValidText(error)) {\r\n        ariaDescribedBy = ariaDescribedBy + errorElement.id + ' ';\r\n    }\r\n    if (isValidText(helptext)) {\r\n        ariaDescribedBy = ariaDescribedBy + helptextElement.id + ' ';\r\n    }\r\n    if (isValidInteger(maxchar)) {\r\n        ariaDescribedBy = ariaDescribedBy + characterLimitElement.querySelector('.max-limit').id + ' ';\r\n    }\r\n    if (ariaDescribedBy.trim() !== '') {\r\n        inputElement.setAttribute('aria-describedby', ariaDescribedBy.trim());\r\n    }\r\n}","'use strict';\r\n\r\nconst ARROW_DISTANCE_TO_TARGET = 4; // Must match '$-arrow-dist-to-target' in 'src\\stylesheets\\components\\_tooltip.scss'\r\nconst ARROW_HEIGHT = 8;             // Must match '$-arrow-height' in 'src\\stylesheets\\components\\_tooltip.scss'\r\nconst MIN_MARGIN = 8;               // Minimum margin to the edge of the window\r\n\r\nfunction Tooltip(wrapper) {\r\n    if ((wrapper.getElementsByClassName('tooltip-target')).length === 0) {\r\n        throw new Error(`Missing tooltip target. Add class 'tooltip-target' to element inside tooltip wrapper.`);\r\n    }\r\n    else if (!wrapper.hasAttribute('data-tooltip') || wrapper.dataset.tooltip === '') {\r\n        throw new Error(`Missing tooltip text. Wrapper must have data attribute 'data-tooltip'.`);\r\n    }\r\n    else if (wrapper.dataset.trigger !== 'hover' && wrapper.dataset.trigger !== 'click') {\r\n        throw new Error(`Missing trigger. Tooltip wrapper must have data attribute 'data-trigger=\"hover\"' or 'data-trigger=\"click\"'.`);\r\n    }\r\n    else if (!wrapper.hasAttribute('data-tooltip-id') || wrapper.dataset.tooltipId === '') {\r\n        throw new Error(`Missing ID. Tooltip wrapper must have data attribute 'data-tooltip-id'.`);\r\n    }\r\n    else {\r\n        this.wrapper = wrapper;\r\n        this.target = wrapper.getElementsByClassName('tooltip-target')[0];\r\n\r\n        this.tooltip = document.createElement('span');\r\n        this.tooltip.classList.add('tooltip');\r\n\r\n        let arrow = document.createElement('span');\r\n        arrow.classList.add('tooltip-arrow');\r\n        arrow.setAttribute('aria-hidden', true);\r\n    }\r\n}\r\n\r\nTooltip.prototype.init = function () {\r\n    let wrapper = this.wrapper;\r\n    let tooltipTarget = this.target;\r\n    let tooltipEl = this.tooltip;\r\n\r\n    hideTooltip(wrapper, tooltipTarget, tooltipEl);\r\n\r\n    /* Ensure tooltip remains visible if window size is reduced */\r\n    window.addEventListener('resize', function () {\r\n        updateTooltipPosition(wrapper, tooltipTarget, tooltipEl);\r\n    });\r\n\r\n    document.getElementsByTagName('body')[0].addEventListener('click', closeAllTooltips);\r\n    document.getElementsByTagName('body')[0].addEventListener('keyup', closeOnTab);\r\n\r\n    /* A \"true\" tooltip describes the element which triggered it and is triggered on hover */\r\n    let trueTooltip = (wrapper.dataset.trigger === 'hover');\r\n    tooltipEl.id = wrapper.dataset.tooltipId;\r\n\r\n    if (trueTooltip) {\r\n        wrapper.append(tooltipEl);\r\n        appendArrow(wrapper);\r\n        if (tooltipTarget.classList.contains('tooltip-is-label')) {\r\n            tooltipTarget.setAttribute('aria-labelledby', wrapper.dataset.tooltipId);\r\n        }\r\n        else {\r\n            tooltipTarget.setAttribute('aria-describedby', wrapper.dataset.tooltipId);\r\n        }\r\n        tooltipEl.setAttribute('role', 'tooltip');\r\n        tooltipEl.innerText = wrapper.dataset.tooltip;\r\n\r\n        tooltipTarget.addEventListener('focus', function () {\r\n            showTooltip(wrapper, tooltipTarget, tooltipEl);\r\n            updateTooltipPosition(wrapper, tooltipTarget, tooltipEl);\r\n        });\r\n\r\n        tooltipTarget.addEventListener('mouseover', function (e) {\r\n            /* The tooltip should not appear if the user just briefly moves the cursor \r\n               across the component. Use the 'js-hover' class as a flag to check, if\r\n               the hover action is persistant. */\r\n            tooltipTarget.classList.add('js-hover');\r\n            setTimeout(function () {\r\n                if (tooltipTarget.classList.contains('js-hover')) {\r\n                    showTooltip(wrapper, tooltipTarget, tooltipEl);\r\n                    updateTooltipPosition(wrapper, tooltipTarget, tooltipEl);\r\n                }\r\n            }, 300);\r\n        });\r\n\r\n        tooltipTarget.addEventListener('pointerdown', function (e) {\r\n            /* The tooltip should appear after pressing down for a while on the element.\r\n               Use the 'js-pressed' class as a flag to check, if the element stays pressed\r\n               down. */\r\n            tooltipTarget.classList.add('js-pressed');\r\n            setTimeout(function () {\r\n                if (tooltipTarget.classList.contains('js-pressed')) {\r\n                    showTooltip(wrapper, tooltipTarget, tooltipEl);\r\n                    updateTooltipPosition(wrapper, tooltipTarget, tooltipEl);\r\n                }\r\n            }, 500);\r\n        });\r\n\r\n        tooltipTarget.addEventListener('mouseleave', function (e) {\r\n            tooltipTarget.classList.remove('js-hover');\r\n            tooltipTarget.classList.remove('js-pressed');\r\n            let center = (tooltipTarget.getBoundingClientRect().top + tooltipTarget.getBoundingClientRect().bottom) / 2; // Use center of target due to rounding errors\r\n            let onTooltip = false;\r\n            if (wrapper.classList.contains('place-above')) {\r\n                onTooltip = tooltipTarget.getBoundingClientRect().left <= e.clientX && e.clientX <= tooltipTarget.getBoundingClientRect().right && e.clientY <= center;\r\n            }\r\n            else if (wrapper.classList.contains('place-below')) {\r\n                onTooltip = tooltipTarget.getBoundingClientRect().left <= e.clientX && e.clientX <= tooltipTarget.getBoundingClientRect().right && e.clientY >= center;\r\n            }\r\n            /* WCAG 1.4.13: It must be possible to hover on the tooltip */\r\n            if (!onTooltip) {\r\n                hideTooltip(wrapper, tooltipTarget, tooltipEl);\r\n            }\r\n        });\r\n\r\n        tooltipTarget.addEventListener('click', function (e) {\r\n            tooltipTarget.classList.remove('js-pressed');\r\n            if (document.activeElement !== tooltipTarget) {\r\n                /* The tooltip target was just clicked but is not the element with focus. That \r\n                   means it probably shouldn't show the tooltip, for example due to an opened \r\n                   modal. However, this also means that tooltip targets in Safari won't show \r\n                   tooltip on click, since click events in Safari don't focus the target. */\r\n                tooltipTarget.classList.remove('js-hover');\r\n                hideTooltip(wrapper, tooltipTarget, tooltipEl);\r\n            }\r\n        });\r\n\r\n        tooltipEl.addEventListener('mouseleave', function (e) {\r\n            tooltipTarget.classList.remove('js-hover');\r\n            tooltipTarget.classList.remove('js-pressed');\r\n            let center = (tooltipEl.getBoundingClientRect().top + tooltipEl.getBoundingClientRect().bottom) / 2; // Use center of tooltip due to rounding errors\r\n            let onTarget = false;\r\n            if (wrapper.classList.contains('place-above')) {\r\n                onTarget = tooltipEl.getBoundingClientRect().left <= e.clientX && e.clientX <= tooltipEl.getBoundingClientRect().right && e.clientY >= center;\r\n            }\r\n            else if (wrapper.classList.contains('place-below')) {\r\n                onTarget = tooltipEl.getBoundingClientRect().left <= e.clientX && e.clientX <= tooltipEl.getBoundingClientRect().right && e.clientY <= center;\r\n            }\r\n            /* Don't remove tooltip if hover returns to the target which triggered the tooltip */\r\n            if (!onTarget) {\r\n                hideTooltip(wrapper, tooltipTarget, tooltipEl);\r\n            }\r\n        });\r\n\r\n        /* If the mouse leaves while in the gap between the target and the tooltip,\r\n           ensure that the tooltip closes */\r\n        wrapper.addEventListener('mouseleave', function (e) {\r\n            tooltipTarget.classList.remove('js-hover');\r\n            tooltipTarget.classList.remove('js-pressed');\r\n            hideTooltip(wrapper, tooltipTarget, tooltipEl);\r\n        });\r\n    }\r\n    /* The \"tooltip\" is actually a \"toggletip\", i.e. a button which turns a tip on or off */\r\n    else {\r\n        let live_region = document.createElement('span');\r\n        live_region.setAttribute('aria-live', 'assertive');\r\n        live_region.setAttribute('aria-atomic', 'true');\r\n        wrapper.append(live_region);\r\n        live_region.append(tooltipEl);\r\n        appendArrow(wrapper);\r\n        tooltipTarget.setAttribute('aria-expanded', 'false');\r\n        tooltipTarget.setAttribute('aria-controls', wrapper.dataset.tooltipId);\r\n        tooltipTarget.addEventListener('click', function () {\r\n            if (wrapper.classList.contains('hide-tooltip')) {\r\n                showTooltip(wrapper, tooltipTarget, tooltipEl);\r\n                updateTooltipPosition(wrapper, tooltipTarget, tooltipEl);\r\n            }\r\n            else {\r\n                hideTooltip(wrapper, tooltipTarget, tooltipEl);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nfunction appendArrow(tooltipWrapper) {\r\n    let arrow = document.createElement('span');\r\n    arrow.classList.add('tooltip-arrow');\r\n    arrow.setAttribute('aria-hidden', true);\r\n    tooltipWrapper.append(arrow);\r\n}\r\n\r\nfunction setWidth(tooltipEl) {\r\n    tooltipEl.style.width = 'max-content';\r\n    let WCAG_Reflow_criteria = 320; // Width of 320 px defined in WCAG 2.1, Criterion 1.4.10 \"Reflow\"\r\n    let accessibleMaxWidth = WCAG_Reflow_criteria - (MIN_MARGIN * 2);\r\n    if (parseInt(window.getComputedStyle(tooltipEl).width) > accessibleMaxWidth) {\r\n        tooltipEl.style.width = accessibleMaxWidth + 'px';\r\n    }\r\n    let screenMaxWidth = document.body.clientWidth - (MIN_MARGIN * 2);\r\n    if (parseInt(window.getComputedStyle(tooltipEl).width) > screenMaxWidth) {\r\n        tooltipEl.style.width = screenMaxWidth + 'px';\r\n    }\r\n}\r\n\r\nfunction placeAboveOrBelow(tooltipWrapper, tooltipTarget, tooltipEl) {\r\n    let spaceAbove = tooltipTarget.getBoundingClientRect().top;\r\n    let spaceBelow = window.innerHeight - tooltipTarget.getBoundingClientRect().bottom;\r\n    let height = tooltipEl.getBoundingClientRect().height + ARROW_DISTANCE_TO_TARGET + ARROW_HEIGHT;\r\n    let placement = 'above'; // Default placement\r\n    if (tooltipWrapper.dataset.position === 'below' && spaceBelow >= height || (height > spaceAbove && height <= spaceBelow)) {\r\n        placement = 'below';\r\n    }\r\n    if (placement === 'above') {\r\n        tooltipWrapper.classList.add('place-above');\r\n        tooltipWrapper.classList.remove('place-below');\r\n    }\r\n    else if (placement === 'below') {\r\n        tooltipWrapper.classList.add('place-below');\r\n        tooltipWrapper.classList.remove('place-above');\r\n    }\r\n}\r\n\r\nfunction setLeft(tooltipTarget, tooltipEl) {\r\n    /* Center the tooltip on the tooltip arrow */\r\n    let left = (parseInt(tooltipTarget.getBoundingClientRect().width) - parseInt(tooltipEl.getBoundingClientRect().width))/2;\r\n    tooltipEl.style.left = left + 'px';\r\n    /* If the tooltip exceeds the left side of the screen, adjust it */\r\n    if (tooltipEl.getBoundingClientRect().left < MIN_MARGIN) {\r\n        let adjustedLeft = 0 - parseInt(tooltipTarget.getBoundingClientRect().left) + MIN_MARGIN;\r\n        tooltipEl.style.left = adjustedLeft + 'px';\r\n    }\r\n    /* If the tooltip exceeds the right side of the screen, adjust it */\r\n    else if (tooltipEl.getBoundingClientRect().right > (document.body.clientWidth - MIN_MARGIN)) {\r\n        let adjustedLeft = parseInt(window.getComputedStyle(tooltipEl).left) - (tooltipEl.getBoundingClientRect().right - document.body.clientWidth + MIN_MARGIN);\r\n        tooltipEl.style.left = adjustedLeft + 'px';\r\n    }\r\n}\r\n\r\nfunction setBottomAndTop(tooltipWrapper, tooltipEl) {\r\n    let total = 0 - tooltipEl.getBoundingClientRect().height - ARROW_HEIGHT - ARROW_DISTANCE_TO_TARGET + 1;\r\n    if (tooltipWrapper.classList.contains('place-above')) {\r\n        tooltipEl.style.top = total + 'px';\r\n        tooltipEl.style.bottom = 'auto';\r\n    }\r\n    else if (tooltipWrapper.classList.contains('place-below')) {\r\n        tooltipEl.style.bottom = total + 'px';\r\n        tooltipEl.style.top = 'auto';\r\n    }\r\n}\r\n\r\nfunction updateTooltipPosition(tooltipWrapper, tooltipTarget, tooltipEl) {\r\n    setWidth(tooltipEl);\r\n    placeAboveOrBelow(tooltipWrapper, tooltipTarget, tooltipEl);\r\n    setLeft(tooltipTarget, tooltipEl);\r\n    setBottomAndTop(tooltipWrapper, tooltipEl);\r\n}\r\n\r\nfunction hideTooltip(tooltipWrapper, tooltipTarget, tooltipEl) {\r\n    tooltipWrapper.classList.add('hide-tooltip');\r\n    if (tooltipTarget.hasAttribute('aria-expanded')) {\r\n        tooltipTarget.setAttribute('aria-expanded', 'false');\r\n        tooltipEl.innerText = \"\";\r\n    }\r\n}\r\n\r\nfunction showTooltip(tooltipWrapper, tooltipTarget, tooltipEl) {\r\n    tooltipWrapper.classList.remove('hide-tooltip');\r\n    if (tooltipTarget.hasAttribute('aria-expanded')) {\r\n        tooltipTarget.setAttribute('aria-expanded', 'true');\r\n        tooltipEl.innerText = tooltipWrapper.dataset.tooltip;\r\n    }\r\n}\r\n\r\nfunction closeAllTooltips(event) {\r\n    let tooltips = document.getElementsByClassName('tooltip-wrapper');\r\n    for (let t = 0; t < tooltips.length; t++) {\r\n        let wrapper = tooltips[t];\r\n        let target = wrapper.getElementsByClassName('tooltip-target')[0];\r\n        let tooltip = wrapper.getElementsByClassName('tooltip')[0];\r\n        let clickedOnTarget = target.getBoundingClientRect().left <= event.clientX && \r\n                              event.clientX <= target.getBoundingClientRect().right && \r\n                              target.getBoundingClientRect().top <= event.clientY && \r\n                              event.clientY <= target.getBoundingClientRect().bottom;\r\n        let clickedOnTooltip = window.getComputedStyle(tooltip).display !== 'none' &&\r\n                               tooltip.getBoundingClientRect().left <= event.clientX && \r\n                               event.clientX <= tooltip.getBoundingClientRect().right && \r\n                               tooltip.getBoundingClientRect().top <= event.clientY && \r\n                               event.clientY <= tooltip.getBoundingClientRect().bottom;\r\n        if (!clickedOnTarget && target !== document.activeElement && !clickedOnTooltip) {\r\n            hideTooltip(wrapper, target, tooltip);\r\n        }\r\n    }\r\n}\r\n\r\nfunction closeOnTab(e) {\r\n    let key = e.key;\r\n    let tooltips = document.getElementsByClassName('tooltip-wrapper');\r\n    if (key === 'Tab') {\r\n        for (let t = 0; t < tooltips.length; t++) {\r\n            let wrapper = tooltips[t];\r\n            let target = wrapper.getElementsByClassName('tooltip-target')[0];\r\n            let tooltip = wrapper.getElementsByClassName('tooltip')[0];\r\n            /* If the user is tabbing to an element, where a tooltip already is open,\r\n               keep it open */\r\n            if (document.activeElement !== target) {\r\n                hideTooltip(wrapper, target, tooltip);\r\n            }\r\n        }\r\n    }\r\n    else if (key === 'Escape') {\r\n        for (let t = 0; t < tooltips.length; t++) {\r\n            let wrapper = tooltips[t];\r\n            let target = wrapper.getElementsByClassName('tooltip-target')[0];\r\n            let tooltip = wrapper.getElementsByClassName('tooltip')[0];\r\n            hideTooltip(wrapper, target, tooltip);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Tooltip;\r\n","'use strict';\r\n\r\nimport * as Glossary from './fds-input-glossary';\r\nimport {isValidText, isValidInteger, isValidType} from './fds-input-attribute-validators';\r\nimport * as Helpers from './fds-input-helpers';\r\nimport * as HandleAttributeChange from './fds-input-attribute-changes';\r\nimport * as Build from './fds-input-build-element';\r\nimport Tooltip from '../../components/tooltip';\r\n\r\nclass FDSInput extends HTMLElement {\r\n    \r\n    /* Private instance fields */\r\n\r\n    #wrapperElement;\r\n    #labelElement;\r\n    #tooltipElement;\r\n    #helptextElement;\r\n    #errorElement;\r\n    #editWrapperElement;\r\n    #inputWrapperElement;\r\n    #prefixElement;\r\n    #inputElement;\r\n    #suffixElement;\r\n    #editButtonElement;\r\n    #characterLimitElement;\r\n\r\n    #handleEditClicked;\r\n    #handleKeyUp;\r\n    #handleBlur;\r\n    #handleFocus;\r\n    #handlePageShow;\r\n\r\n    #glossary;\r\n    #connected\r\n    #initialised;\r\n    #triggerRebuild;\r\n\r\n    #lastKeyUpTimestamp;\r\n    #oldValue;\r\n    #intervalID;\r\n\r\n    /* Private methods */\r\n\r\n    #rebuildElement() {\r\n        // Reset HTML\r\n        this.#wrapperElement.innerHTML = '';\r\n        this.#inputWrapperElement.innerHTML = '';\r\n        this.#inputElement.removeAttribute('aria-describedby');\r\n        if (isValidText(this.label)) {\r\n            this.#labelElement.textContent = this.label;\r\n        }\r\n\r\n        // Update IDs\r\n        Helpers.setHelptextId(this.#helptextElement, this.#inputElement);\r\n        Helpers.setErrorId(this.#errorElement, this.#inputElement);\r\n        Helpers.setCharacterLimitId(this.#characterLimitElement, this.#inputElement);\r\n        Helpers.setTooltipId(this.#tooltipElement, this.#inputElement);\r\n\r\n        // Set up aria-describedby attribute\r\n        Build.setInputAriaDescribedBy(\r\n            this.error, this.helptext, this.maxchar, \r\n            this.#errorElement, this.#helptextElement, this.#characterLimitElement, \r\n            this.#inputElement\r\n        );\r\n\r\n        // Set up edit button\r\n        if (this.hasAttribute('editbutton') && isValidText(this.label)) {\r\n            Helpers.updateEditButton(this.#editButtonElement, this.label, this.#glossary['editText']);\r\n        }\r\n\r\n        // Update error message\r\n        if (isValidText(this.error)) {\r\n            Helpers.updateErrorMessage(this.#errorElement, this.error, this.#glossary['errorText']);\r\n        }\r\n        \r\n        // Add label\r\n        this.#wrapperElement.appendChild(this.#labelElement);\r\n\r\n        // Add 'required' label\r\n        if (this.hasAttribute('showrequired') && isValidText(this.label)) {\r\n            Helpers.updateRequiredLabel(this.#labelElement, this.label, this.#glossary['requiredText']);\r\n        }\r\n\r\n        // Add 'optional' label\r\n        if (this.hasAttribute('showoptional') && isValidText(this.label)) {\r\n            Helpers.updateOptionalLabel(this.#labelElement, this.label, this.#glossary['optionalText']);\r\n        }\r\n\r\n        // Add tooltip\r\n        if (isValidText(this.tooltip)) { \r\n            this.#wrapperElement.appendChild(this.#tooltipElement);\r\n            if (this.#tooltipElement.querySelector('.tooltip-arrow') === null) {\r\n                new Tooltip(this.#tooltipElement).init();\r\n            }\r\n        }\r\n\r\n        // Add helptext\r\n        if (isValidText(this.helptext)) { \r\n            this.#wrapperElement.appendChild(this.#helptextElement); \r\n        }\r\n\r\n        // Add error message\r\n        if (isValidText(this.error)) { \r\n            this.#wrapperElement.appendChild(this.#errorElement); \r\n        }\r\n\r\n        // Add wrapper for edit button\r\n        if (this.hasAttribute('editbutton') && this.hasAttribute('readonly')) {\r\n            this.#wrapperElement.appendChild(this.#editWrapperElement);\r\n        }\r\n\r\n        // Add wrapper for prefix and suffix\r\n        if (isValidText(this.prefix) || isValidText(this.suffix)) {\r\n            if (this.hasAttribute('editbutton') && this.hasAttribute('readonly')) {\r\n                this.#editWrapperElement.appendChild(this.#inputWrapperElement);\r\n            }\r\n            else {\r\n                this.#wrapperElement.appendChild(this.#inputWrapperElement);\r\n            }\r\n        }\r\n\r\n        // Add prefix\r\n        if (isValidText(this.prefix)) { \r\n            this.#inputWrapperElement.appendChild(this.#prefixElement); \r\n        }\r\n\r\n        // Add input\r\n        if (isValidText(this.prefix) || isValidText(this.suffix)) {\r\n            this.#inputWrapperElement.appendChild(this.#inputElement);\r\n        }\r\n        else if (this.hasAttribute('editbutton') && this.hasAttribute('readonly')) {\r\n            this.#editWrapperElement.appendChild(this.#inputElement);\r\n        }\r\n        else {\r\n            this.#wrapperElement.appendChild(this.#inputElement);\r\n        }\r\n\r\n        // Add suffix\r\n        if (isValidText(this.suffix)) { \r\n            this.#inputWrapperElement.appendChild(this.#suffixElement); \r\n        }\r\n\r\n        // Add edit button\r\n        if (this.hasAttribute('editbutton') && this.hasAttribute('readonly')) {\r\n            this.#editWrapperElement.appendChild(this.#editButtonElement);\r\n        }\r\n\r\n        // Add character limit\r\n        if (isValidInteger(this.maxchar)) {\r\n            this.#wrapperElement.appendChild(this.#characterLimitElement);\r\n        }\r\n    }\r\n\r\n    #removeReadOnly() {\r\n        if (this.hasAttribute('readonly')) {\r\n            this.removeAttribute('readonly');\r\n            this.#inputElement.focus();\r\n            let eventEditClicked = new Event('fds-edit-clicked');\r\n            this.dispatchEvent(eventEditClicked);\r\n        }\r\n    }\r\n\r\n    /* Attributes which can invoke attributeChangedCallback() */\r\n\r\n    static observedAttributes = ['autocomplete', 'disabled', 'editbutton', 'error', 'helptext', 'inputid', 'label', 'maxchar', 'maxwidth', 'name', 'prefix', 'readonly', 'required', 'showoptional', 'showrequired', 'suffix', 'tooltip', 'type', 'value'];\r\n\r\n    /*\r\n    --------------------------------------------------\r\n    ATTRIBUTE GETTERS AND SETTERS\r\n    --------------------------------------------------\r\n    */\r\n\r\n    get autocomplete() { return this.getAttribute('autocomplete'); }\r\n    set autocomplete(val) { this.setAttribute('autocomplete', val); }\r\n\r\n    get disabled() { return this.getAttribute('disabled'); }\r\n    set disabled(val) { this.setAttribute('disabled', val); }\r\n\r\n    get editbutton() { return this.getAttribute('editbutton'); }\r\n    set editbutton(val) { this.setAttribute('editbutton', val); }\r\n\r\n    get error() { return this.getAttribute('error'); }\r\n    set error(val) { this.setAttribute('error', val); }\r\n\r\n    get helptext() { return this.getAttribute('helptext'); }\r\n    set helptext(val) { this.setAttribute('helptext', val); }\r\n\r\n    get inputid() { return this.getAttribute('inputid'); }\r\n    set inputid(val) { this.setAttribute('inputid', val); }\r\n\r\n    get label() { return this.getAttribute('label'); }\r\n    set label(val) { this.setAttribute('label', val); }\r\n\r\n    get maxchar() { return this.getAttribute('maxchar'); }\r\n    set maxchar(val) { this.setAttribute('maxchar', val); }\r\n\r\n    get maxwidth() { return this.getAttribute('maxwidth'); }\r\n    set maxwidth(val) { this.setAttribute('maxwidth', val); }\r\n\r\n    get name() { return this.getAttribute('name'); }\r\n    set name(val) { this.setAttribute('name', val); }\r\n\r\n    get prefix() { return this.getAttribute('prefix'); }\r\n    set prefix(val) { this.setAttribute('prefix', val); }\r\n\r\n    get readonly() { return this.getAttribute('readonly'); }\r\n    set readonly(val) { this.setAttribute('readonly', val); }\r\n\r\n    get required() { return this.getAttribute('required'); }\r\n    set required(val) { this.setAttribute('required', val); }\r\n\r\n    get showoptional() { return this.getAttribute('showoptional'); }\r\n    set showoptional(val) { this.setAttribute('showoptional', val); }\r\n\r\n    get showrequired() { return this.getAttribute('showrequired'); }\r\n    set showrequired(val) { this.setAttribute('showrequired', val); }\r\n\r\n    get suffix() { return this.getAttribute('suffix'); }\r\n    set suffix(val) { this.setAttribute('suffix', val); }\r\n\r\n    get tooltip() { return this.getAttribute('tooltip'); }\r\n    set tooltip(val) { this.setAttribute('tooltip', val); }\r\n\r\n    get type() { return this.getAttribute('type'); }\r\n    set type(val) { this.setAttribute('type', val); }\r\n    \r\n    get value() { return this.#inputElement.value; }\r\n    set value(val) { this.#inputElement.value = val; }\r\n\r\n    /*\r\n    --------------------------------------------------\r\n    CUSTOM ELEMENT CONSTRUCTOR (do not access or add attributes in the constructor)\r\n    --------------------------------------------------\r\n    */\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.#initialised = false;\r\n        this.#connected = false;\r\n        this.#glossary = Glossary.glossary;\r\n\r\n        this.#triggerRebuild = ['label', 'inputid', 'required', 'disabled', 'readonly', 'helptext', 'error', 'prefix', 'suffix', 'editbutton', 'showrequired', 'showoptional', 'maxchar', 'tooltip'];\r\n\r\n        this.#lastKeyUpTimestamp = null;\r\n        this.#oldValue = '';\r\n        this.#intervalID = null;\r\n\r\n        this.#handleEditClicked = () => { this.#removeReadOnly() };\r\n        this.#handleKeyUp = () => {\r\n            let chars = this.charactersLeft();\r\n            Helpers.updateVisibleMessage(this.#glossary, chars, this.#inputElement, this.#characterLimitElement);\r\n            this.#lastKeyUpTimestamp = Date.now();\r\n        };\r\n        this.#handleFocus = () => {\r\n            /* Reset the screen reader message on focus to force an update of the message.\r\n            This ensures that a screen reader informs the user of how many characters there is left\r\n            on focus and not just what the character limit is. */\r\n            if (this.#inputElement.value !== \"\") {\r\n                let srMessage = this.#characterLimitElement.querySelector('.sr-message');\r\n                srMessage.innerHTML = '';\r\n            }\r\n        \r\n            this.#intervalID = setInterval(function () {\r\n                /* Don't update the Screen Reader message unless it's been awhile\r\n                since the last key up event. Otherwise, the user will be spammed\r\n                with audio notifications while typing. */\r\n                if (!this.#lastKeyUpTimestamp || (Date.now() - 500) >= this.#lastKeyUpTimestamp) {\r\n                    let srMessage = this.#characterLimitElement.querySelector('.sr-message').innerHTML;\r\n                    let visibleMessage = this.#characterLimitElement.querySelector('.visible-message').innerHTML;     \r\n        \r\n                    /* Don't update the messages unless the input has changed or if there\r\n                    is a mismatch between the visible message and the screen reader message. */\r\n                    if (this.#oldValue !== this.#inputElement.value || srMessage !== visibleMessage) {\r\n                        this.#oldValue = this.#inputElement.value;\r\n                        this.updateMessages();\r\n                    }\r\n                }\r\n            }.bind(this), 1000);\r\n        };\r\n        this.#handleBlur = () => {\r\n            clearInterval(this.#intervalID);\r\n            // Don't update the messages on blur unless the value of the textarea/text input has changed\r\n            if (this.#oldValue !== this.#inputElement.value) {\r\n                this.#oldValue = this.#inputElement.value;\r\n                this.updateMessages();\r\n            }\r\n        };\r\n        this.#handlePageShow = () => {\r\n            this.updateMessages();\r\n        };\r\n    }\r\n\r\n    /*\r\n    --------------------------------------------------\r\n    CUSTOM ELEMENT FUNCTIONS\r\n    --------------------------------------------------\r\n    */\r\n\r\n    getLabelElement() {\r\n        return this.#labelElement;\r\n    }\r\n\r\n    getInputElement() {\r\n        return this.#inputElement;\r\n    }\r\n\r\n    updateGlossary(newGlossary) {\r\n        Glossary.updateGlossary(this.#glossary, newGlossary);\r\n\r\n        /* Check if the old text is (potentially) visible to the user */\r\n        let updateErrorTextNow = newGlossary['errorText'] !== undefined && isValidText(this.error);\r\n        let updateEditTextNow = newGlossary['editText'] !== undefined && isValidText(this.label) && this.hasAttribute('editbutton');\r\n        let updateRequiredTextNow = newGlossary['requiredText'] !== undefined && isValidText(this.label) && this.hasAttribute('showrequired');\r\n        let updateOptionalTextNow = newGlossary['optionalText'] !== undefined && isValidText(this.label) && this.hasAttribute('showoptional');\r\n        let updateCharactersTextNow = newGlossary['oneCharacterLeftText'] || newGlossary['manyCharactersLeftText'] || \r\n                                      newGlossary['oneCharacterExceededText'] || newGlossary['manyCharactersExceededText'];\r\n        let updateMaxCharactersTextNow = newGlossary['maxCharactersText'] !== undefined && isValidInteger(this.maxchar);\r\n        let updateTooltipIconText = newGlossary['tooltipIconText'] !== undefined;\r\n\r\n        /* If the old text is visible to the user, update it immediately */\r\n        if (updateErrorTextNow) {\r\n            Helpers.updateErrorMessage(this.#errorElement, this.error, this.#glossary['errorText']);\r\n        }\r\n        if (updateEditTextNow) {\r\n            Helpers.updateEditButton(this.#editButtonElement, this.label, this.#glossary['editText']);\r\n        }\r\n        if (updateRequiredTextNow) {\r\n            Helpers.updateRequiredLabel(this.#labelElement, this.label, this.#glossary['requiredText']);\r\n        }\r\n        if (updateOptionalTextNow) {\r\n            Helpers.updateOptionalLabel(this.#labelElement, this.label, this.#glossary['optionalText']);\r\n        }\r\n        if (updateCharactersTextNow) {\r\n            /* Prevent screen readers from announcing the glossary change */\r\n            let maxLimitText = this.#characterLimitElement.querySelector('.max-limit').innerHTML;\r\n            this.#characterLimitElement.innerHTML = \r\n                '<span class=\"max-limit\">' + maxLimitText + '</span>' + \r\n                '<span class=\"visible-message form-hint\" aria-hidden=\"true\"></span>' + \r\n                '<span class=\"sr-message\"></span>';\r\n            this.updateMessages();\r\n            this.#characterLimitElement.querySelector('.sr-message').setAttribute('aria-live', 'polite');\r\n        }\r\n        if (updateMaxCharactersTextNow) {\r\n            this.#characterLimitElement.querySelector('.max-limit').innerHTML = this.#glossary['maxCharactersText'].replace(/{value}/, this.maxchar);\r\n        }\r\n        if (updateTooltipIconText) {\r\n            this.#tooltipElement.querySelector('button').setAttribute('aria-label', this.#glossary['tooltipIconText']);\r\n        }\r\n    }\r\n\r\n    charactersLeft() {\r\n        if (isValidInteger(this.maxchar)) {\r\n            let currentLength = this.#inputElement.value.length;\r\n            return parseInt(this.maxchar) - currentLength;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    updateMessages() {\r\n        if (isValidInteger(this.maxchar)) {\r\n            let chars = this.charactersLeft();\r\n            Helpers.updateVisibleMessage(this.#glossary, chars, this.#inputElement, this.#characterLimitElement);\r\n            Helpers.updateSRMessage(this.#glossary, chars, this.#characterLimitElement);\r\n        }\r\n    }\r\n\r\n    /*\r\n    --------------------------------------------------\r\n    CUSTOM ELEMENT ADDED TO DOCUMENT\r\n    --------------------------------------------------\r\n    */\r\n\r\n    connectedCallback() {\r\n\r\n        if (this.label === null || this.name === null) {\r\n            throw new Error(`Custom element 'fds-input' not created. Element must always have the attributes 'label' and 'name'.`);\r\n        }\r\n        else if (this.innerHTML !== '') {\r\n            throw new Error(`Custom element 'fds-input' not created. Element must not contain content at element creation.`);\r\n        }\r\n        else {\r\n            /* Ensure input always has an ID */\r\n            if (!isValidText(this.inputid)) {\r\n                Helpers.setDefaultInputId(this.#labelElement, this.#inputElement);\r\n            }\r\n\r\n            /* Ensure input always has a type */\r\n            if (!isValidType(this.type)) {\r\n                Helpers.setDefaultType(this.#inputElement);\r\n            }\r\n\r\n            this.#rebuildElement();\r\n            this.appendChild(this.#wrapperElement);\r\n\r\n            if (isValidInteger(this.maxchar)) {\r\n                this.#inputElement.addEventListener('keyup', this.#handleKeyUp, false);\r\n                this.#inputElement.addEventListener('focus', this.#handleFocus, false);\r\n                this.#inputElement.addEventListener('blur', this.#handleBlur, false);\r\n                window.addEventListener('pageshow', this.#handlePageShow, false);\r\n            }\r\n            \r\n            this.#connected = true;\r\n        }\r\n    }\r\n\r\n    /* \r\n    --------------------------------------------------\r\n    CUSTOM ELEMENT REMOVED FROM DOCUMENT\r\n    --------------------------------------------------\r\n    */ \r\n\r\n    disconnectedCallback() { }\r\n\r\n    /*\r\n    --------------------------------------------------\r\n    CUSTOM ELEMENT'S ATTRIBUTE(S) CHANGED\r\n    --------------------------------------------------\r\n    */\r\n\r\n    attributeChangedCallback(attribute, oldValue, newValue) {\r\n\r\n        /* Element setup. Applied once on the first call to \r\n           attributeChangedCallback() before connectedCallback(). */\r\n\r\n        if (!this.#initialised) {\r\n            this.#wrapperElement        = Build.createWrapperElement();\r\n            this.#labelElement          = Build.createLabelElement();\r\n            this.#tooltipElement        = Build.createTooltipElement(this.#glossary);\r\n            this.#helptextElement       = Build.createHelptextElement();\r\n            this.#errorElement          = Build.createErrorElement();\r\n            this.#editWrapperElement    = Build.createEditWrapperElement();\r\n            this.#inputWrapperElement   = Build.createInputWrapperElement();\r\n            this.#prefixElement         = Build.createPrefixElement();\r\n            this.#inputElement          = Build.createInputElement();\r\n            this.#suffixElement         = Build.createSuffixElement();\r\n            this.#editButtonElement     = Build.createEditButtonElement(this.#handleEditClicked);\r\n            this.#characterLimitElement = Build.createCharacterLimitElement();\r\n\r\n            this.#initialised = true;\r\n        }\r\n\r\n        /* Attribute changes */\r\n\r\n        if (attribute === 'autocomplete') {\r\n            HandleAttributeChange.autocomplete(newValue, this.#inputElement);\r\n        }\r\n\r\n        if (attribute === 'disabled') {\r\n            HandleAttributeChange.disabled(newValue, this.#labelElement, this.#inputElement, this.#inputWrapperElement);\r\n        }\r\n\r\n        // editbutton handled in rebuild step\r\n\r\n        if (attribute === 'error') {\r\n            HandleAttributeChange.error(newValue, this.#wrapperElement, this.#inputElement);\r\n        }\r\n\r\n        if (attribute === 'helptext') {\r\n            HandleAttributeChange.helptext(newValue, this.#helptextElement);\r\n        }\r\n\r\n        if (attribute === 'inputid') { \r\n            HandleAttributeChange.inputid(newValue, this.#labelElement, this.#inputElement); \r\n        }\r\n\r\n        if (attribute === 'label') { \r\n            HandleAttributeChange.label(newValue, this.#labelElement); \r\n        }\r\n\r\n        if (attribute === 'maxchar') {\r\n            HandleAttributeChange.maxchar(newValue, this.#inputElement, this.#characterLimitElement, this.#connected, this.#glossary, this.#handleKeyUp, this.#handleFocus, this.#handleBlur, this.#handlePageShow, this.value, this.contains(this.#characterLimitElement));\r\n        }\r\n\r\n        if (attribute === 'maxwidth') {\r\n            HandleAttributeChange.maxwidth(newValue, this.#inputElement);\r\n        }\r\n\r\n        if (attribute === 'name') { \r\n            HandleAttributeChange.name(newValue, this.#inputElement); \r\n        }\r\n\r\n        if (attribute === 'prefix') {\r\n            HandleAttributeChange.prefix(newValue, this.#inputWrapperElement, this.#prefixElement);\r\n        }\r\n\r\n        if (attribute === 'readonly') {\r\n            HandleAttributeChange.readonly(newValue, this.#inputElement, this.#inputWrapperElement);\r\n        }\r\n\r\n        if (attribute === 'required') {\r\n            HandleAttributeChange.required(newValue, this.#inputElement);\r\n        }\r\n\r\n        // showoptional handled in rebuild step\r\n\r\n        // showrequired handled in rebuild step\r\n\r\n        if (attribute === 'suffix') {\r\n            HandleAttributeChange.suffix(newValue, this.#inputWrapperElement, this.#suffixElement);\r\n        }\r\n\r\n        if (attribute === 'tooltip') {\r\n            HandleAttributeChange.tooltip(newValue, this.#tooltipElement);\r\n        }\r\n\r\n        if (attribute === 'type') {\r\n            HandleAttributeChange.type(newValue, this.#inputElement);\r\n        }\r\n\r\n        if (attribute === 'value') { \r\n            HandleAttributeChange.value(newValue, this.#inputElement, this.#characterLimitElement, this.#connected, this.#glossary, this.maxchar); \r\n        }\r\n\r\n        Helpers.checkDisallowedCombinations(\r\n            isValidText(this.error), \r\n            this.hasAttribute('required'), \r\n            this.hasAttribute('readonly'), \r\n            this.hasAttribute('disabled'),\r\n            this.hasAttribute('showrequired'),\r\n            this.hasAttribute('showoptional'),\r\n            isValidInteger(this.maxchar)\r\n        );\r\n\r\n        /* Update HTML */\r\n\r\n        if (this.#triggerRebuild.includes(attribute) && this.#initialised && this.#connected) {\r\n            this.#rebuildElement();\r\n        }\r\n    }\r\n}\r\n\r\nexport default FDSInput;","import FDSInput from './custom-elements/fds-input/fds-input';\r\n\r\nif (customElements.get('fds-input') === undefined) {\r\n    window.customElements.define('fds-input', FDSInput);\r\n}"],"names":["glossary","updateGlossary","oldGlossary","newGlossary","keys","Object","forEach","key","undefined","isValidType","type","TYPES","includes","isValidInteger","integer","number","parseInt","Number","isInteger","isValidText","s","String","trim","setDefaultInputId","labelElement","inputElement","randomString","Date","now","toString","slice","Math","floor","random","setAttribute","setDefaultType","characterLimitMessage","charactersLeft","message","exceeded","abs","replace","updateVisibleMessage","characterLimitElement","newMessage","visibleMessage","querySelector","classList","add","remove","innerHTML","updateSRMessage","srMessage","setHelptextId","helptextElement","id","setErrorId","errorElement","setCharacterLimitId","setTooltipId","tooltipElement","dataset","tooltipId","updateErrorMessage","errorText","srText","updateEditButton","editButtonElement","labelText","editText","updateRequiredLabel","requiredText","updateOptionalLabel","optionalText","checkDisallowedCombinations","hasError","isRequired","isReadonly","isDisabled","showRequired","showOptional","hasMaxChar","isOptional","Error","Helpers","autocomplete","newValue","removeAttribute","disabled","inputWrapperElement","error","wrapperElement","helptext","textContent","inputid","label","maxchar","connected","handleKeyUp","handleFocus","handleBlur","handlePageShow","value","containsCharacterLimit","charactersRemaining","length","addEventListener","window","removeEventListener","maxwidth","paddingPixels","borderPixels","style","maxWidth","width","name","prefix","prefixElement","readonly","required","suffix","suffixElement","tooltip","chars","createWrapperElement","document","createElement","createLabelElement","createTooltipElement","position","trigger","createHelptextElement","createErrorElement","createEditWrapperElement","editWrapperElement","createInputWrapperElement","createPrefixElement","createInputElement","createSuffixElement","createEditButtonElement","handleEditClicked","createCharacterLimitElement","setInputAriaDescribedBy","ariaDescribedBy","ARROW_DISTANCE_TO_TARGET","ARROW_HEIGHT","MIN_MARGIN","Tooltip","wrapper","getElementsByClassName","hasAttribute","target","arrow","prototype","init","tooltipTarget","tooltipEl","hideTooltip","updateTooltipPosition","getElementsByTagName","closeAllTooltips","closeOnTab","trueTooltip","append","appendArrow","contains","innerText","showTooltip","e","setTimeout","center","getBoundingClientRect","top","bottom","onTooltip","left","clientX","right","clientY","activeElement","onTarget","live_region","tooltipWrapper","setWidth","WCAG_Reflow_criteria","accessibleMaxWidth","getComputedStyle","screenMaxWidth","body","clientWidth","placeAboveOrBelow","spaceAbove","spaceBelow","innerHeight","height","placement","setLeft","adjustedLeft","setBottomAndTop","total","event","tooltips","t","clickedOnTarget","clickedOnTooltip","display","Glossary","HandleAttributeChange","Build","FDSInput","HTMLElement","initialised","triggerRebuild","lastKeyUpTimestamp","oldValue","intervalID","rebuildElement","#rebuildElement","appendChild","removeReadOnly","#removeReadOnly","focus","eventEditClicked","Event","dispatchEvent","observedAttributes","getAttribute","val","editbutton","showoptional","showrequired","constructor","setInterval","updateMessages","bind","clearInterval","getLabelElement","getInputElement","updateErrorTextNow","updateEditTextNow","updateRequiredTextNow","updateOptionalTextNow","updateCharactersTextNow","updateMaxCharactersTextNow","updateTooltipIconText","maxLimitText","currentLength","connectedCallback","disconnectedCallback","attributeChangedCallback","attribute","customElements","get","define"],"sourceRoot":""}