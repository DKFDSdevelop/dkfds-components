@use "../values/fds-values" as fds;
@use "../functions/functions" as func;
@use "../mixins/mixins" as mixins;

/*
----------------------------------------
Alert
----------------------------------------
*/
$custom-alerts: () !default;
$custom-alerts-bar: () !default;

$alerts: (
  success: fds.$alert-success-background-color,
  warning: fds.$alert-warning-background-color,
  error: fds.$alert-error-background-color,
  info: fds.$alert-info-background-color
);

$alerts-bar: (
  success: fds.$alert-success-border-color,
  warning: fds.$alert-warning-border-color,
  error: fds.$alert-error-border-color,
  info: fds.$alert-info-border-color
);

$alerts: map-merge($alerts, $custom-alerts);
$alerts-bar: map-merge($alerts-bar, $custom-alerts-bar);

.alert {
  background-color: func.color(fds.$alert-background-color);
  background-position: 16px 16px;
  background-repeat: no-repeat;
  background-size: 24px;
  padding-bottom: func.units(fds.$alert-padding);
  padding-left: func.units(fds.$alert-padding);
  padding-right: func.units(fds.$alert-padding);
  padding-top: func.units(fds.$alert-padding);
  position: relative;
  margin-top: func.units(4);
  margin-bottom: func.units(4);

  border-left: func.units(fds.$alert-border-size) solid func.color(fds.$alert-border-color);

  &:first-child {
    margin-top:0;
  }

  &.alert--paragraph {
    max-width: fds.$typography-text-max-width;
  }
  .alert-close{
    @include mixins.button-unstyled();
    cursor:pointer;
    position: absolute;
    top: func.units(4);
    right: func.units(4);
    @include mixins.small-text;
    color: func.color(fds.$alert-close-text-color);
    text-decoration: underline;
    .icon-svg{
      margin-right: func.units(2);
      width: 1.6rem;
      height: 1.6rem;
      fill: currentColor;
    }
  }

  .alert-heading {
    @include mixins.responsive-style(fds.$alert-heading-fontsize, font-size);
    @include mixins.responsive-style(fds.$alert-heading-lineheight, line-height);
    margin-top: 0;
    margin-bottom: 0;
    font-weight: func.font-weight("semibold");
    color: func.color(fds.$alert-heading-color);
    -ms-word-wrap: break-word;
    word-wrap: break-word;
  }

  .alert-text {
    margin-bottom: 0;
    margin-top: 0;
    color: func.color(fds.$alert-text-color);
    max-width: fds.$typography-text-max-width;
    a, a:link, a:active, a:visited, a:hover{
      color: func.color(fds.$alert-text-color);
    }
  }
}

@each $name, $bgcolor in $alerts {
  .alert-#{$name} {
    background-color: func.color($bgcolor);
    border-color: func.color(map-get($alerts-bar, $name));

    &.alert--show-icon{
      $alert-icon: $name;
      @if $name == error {
        $alert-icon: 'highlight-off';
      }
      
      @if $name == success {
        $alert-icon: 'check-circle';
      }
      
      @if $name == warning {
        $alert-icon: 'report-problem';
      }
      background-image: url(fds.$icons-folder-path+'/'+$alert-icon+'.svg');
      padding-left: calc(#{func.units(fds.$alert-padding)} + #{fds.$alert-icon-size} + 8px);
    }
  }
}

.alert + .alert{
  margin-top: func.units(4);
}
