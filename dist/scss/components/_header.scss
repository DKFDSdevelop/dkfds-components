// Header variables ---------- //
// z-indexes - TODO refactor to a site-wide z-index management approach
$z-index-header:  7000;
$z-index-overlay: 8000;
$z-index-nav:     9000;

// Header ------------- //

.header {
    width: 100%;
    border-bottom: 1px solid color($header-border-bottom-color);

    .logo {
        background-image: url($image-path+'/'+$header-portal-logo);
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center left;
        display: inline-block;
        height: 60px;
        width: 200px;
        max-width: 60%;
    }

    .button {
        width: 100%;

        @include media-breakpoint-up($nav-responsive-breakpoint) {
            width: auto;
        }
    }

    h1, h2, h3, h4, h5, h6, p {
        margin-top: 0;
        margin-bottom: 0;
    }

    @include media-breakpoint-up($nav-responsive-breakpoint) {

        .form-select,
        .form-input {
            margin-top: 0;
            margin-bottom: 0;
        }

        .form-select,
        .form-input {
            width: auto;
        }
    }

    .button-menu-open {
        width: auto;
        white-space: nowrap;

        @include media-breakpoint-up($nav-responsive-breakpoint) {
            display: none;
        }
    }

    .button-menu-close {
        width: unset;
        margin-left: auto;
        display: flex;
        align-items: center;
        margin-right: units(4);
        margin-top: 12px;
        margin-bottom: 12px;

        .icon-svg {
            margin: 0 8px 0 0;
        }

        span {
            position: relative;
            top: 1px;
        }

        @include media-breakpoint-up($nav-responsive-breakpoint) {
            display: none;
        }
    }

    .portal-header {
        background-color: color($header-portal-background-color);
        border-bottom: border($header-portal-border);
        width: 100%;

        &.portal-header-compact {
            font-size: font-size($typography-small-text-font-size);
            line-height: units($typography-small-text-line-height, 'rem');

            p {
                font-size: font-size($typography-small-text-font-size);
                line-height: units($typography-small-text-line-height, 'rem');
            }

            .portal-info .user {
                max-width: none;
            }


            .portal-header-inner {
                padding-top: units(2);
                padding-bottom: calc(#{units(2)} - 1px);
            }

            .logo {
                max-height: 24px;
                width: $header-portal-compact-logo-width;
                margin-top: units(3);
                margin-bottom: units(3);
            }
        }

        .portal-header-inner {
            width: 100%;
            padding-top: calc(#{units(4)} - 1px);
            padding-bottom: calc(#{units(4)} - 1px);
            display: flex;
            align-items: center;

            @include media-breakpoint-up($nav-responsive-breakpoint) {
                flex-direction: row;
            }
        }

        .portal-info {
            display: none;

            @include media-breakpoint-up($nav-responsive-breakpoint) {
                margin-left: auto;
                display: flex;
                align-items: center;

                & > * {
                    margin-left: units(4);
                }
            }

            .user {
                text-align: right;
                max-width: 500px;
            }

            .button {
                white-space: nowrap;
            }
        }
    }

    .solution-header {
        background-color: color($header-solution-background-color);
        width: 100%;

        .solution-header-inner {
            display: flex;
            align-items: center;
            flex-direction: row;
            padding-top: calc(#{units(4)} - 1px);
            padding-bottom: calc(#{units(4)} - 1px);
        }

        .solution-heading {

            a, h1, .h1 {
                font-size: font-size($header-solution-text-size);
                line-height: units($header-solution-line-height, 'rem');
                font-weight: font-weight("semibold");
                color: color($header-solution-text-color);
                text-decoration: none;
                display: inline-block;

                @include media-breakpoint-up(md) {
                    font-size: font-size($header-solution-text-size-desktop);
                    line-height: units($header-solution-line-height-desktop, 'rem');
                }
            }

            p, h2, h3, h4, h5, .h2, .h3, .h4, .h5 {
                color: color($header-solution-text-color);
            }

            .function-link {
                color: color($header-solution-text-color);

                &:hover,
                &:focus,
                &:visited {
                    color: color($header-solution-text-color);
                }
            }
        }

        .solution-info {
            display: none;

            @include media-breakpoint-up($nav-responsive-breakpoint) {
                margin-left: auto;
                text-align: right;
                max-width: 60%;
                display: block;
            }
        }
    }

    .authority-name {
        color: color($header-solution-authority-name);
        font-weight: font-weight("semibold");
        font-size: font-size($header-solution-authority-name-font-size);
        line-height: 2.4rem;
        margin-top: 0;
        margin-bottom: 0;
    }

    .button-contact {
        display: inline-flex;

        .icon-svg {
            position: relative;
            top: -1px;
        }
    }

    .portal-info-mobile {
        padding: units(5) units(4);
        border-bottom: border(20);
        text-align: left;

        p {
            margin-bottom: units(3);
        }

        .button-signin,
        .button-signout {
            margin-top: 8px;
        }

        @include media-breakpoint-up($nav-responsive-breakpoint) {
            display: none;
        }
    }

    .solution-info-mobile {
        padding: units(5) units(4);

        p {
            margin-bottom: units(3);
            color: color($header-solution-info-mobile-text-color);

            &:last-child {
                margin-bottom: 0;
            }
        }

        .function-link {
            color: color($header-solution-info-mobile-text-color);

            &:hover,
            &:focus,
            &:visited {
                color: color($header-solution-info-mobile-text-color);
            }
        }

        @include media-breakpoint-up($nav-responsive-breakpoint) {
            display: none;
        }
    }

    .nav,
    .nav-container {
        $sliding-panel-width: 85%;

        @keyframes slidein-left {
            from {
                transform: translateX($sliding-panel-width);
            }

            to {
                transform: translateX(0);
            }
        }

        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: auto;
        background-color: color($header-navigation-background-color);
        display: none;
        flex-direction: column;
        overflow-y: auto;
        padding: 0;
        width: $sliding-panel-width;
        z-index: $z-index-nav;

        @include media-breakpoint-up($nav-responsive-breakpoint) {
            border-left: none;
            display: block;
            overflow-y: visible;
            position: static;
            border-top: 1px solid color($navigation-border-desktop-top-color);
            padding: 0;
            width: 100%;
        }

        &.is-visible {
            animation: slidein-left 0.3s ease-in-out;
            display: block;
        }

        .container {
            padding-left: 0;
            padding-right: 0;

            @include media-breakpoint-up($nav-responsive-breakpoint) {
                padding-left: calc($grid-gutter-width / 2);
                padding-right: calc($grid-gutter-width / 2);
                width: 100%;
                display: flex;
                align-items: center;
                justify-content: space-between;
                flex-direction: row;
            }
        }
    }
}

.overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: color('black');
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    visibility: hidden;
    z-index: $z-index-overlay;

    &.is-visible {
        opacity: 0.75;
        visibility: visible;
    }
}