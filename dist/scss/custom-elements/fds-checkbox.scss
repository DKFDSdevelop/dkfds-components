@use "../variables" as vars;
@use "../functions" as func;
@use "../mixins" as mixins;

$checkbox-radio-size: func.units(vars.$input-checkbox-radio-size);
$label-distance: func.units(vars.$input-checkbox-radio-label-distance);
$checkmark-size: func.units(vars.$input-checkbox-checkmark-size);
$expand-hit-area: func.units(2);
$button-distance: func.units(3);


fds-checkbox {
    display: block;
    margin-top: func.units(3);
    position: relative; // Needed for the nested input buttons using absolute position

    &:first-of-type {
        margin-top: 0;
    }

}

fds-checkbox fds-help-text {
    padding-left: 32px;
    margin-top: -4px;
}

legend + fds-checkbox:first-of-type {
        margin-top: $button-distance;
}

// Radio and checkbox label/text
.form-checkbox+label {
    cursor: pointer;
    font-weight: func.font-weight(vars.$input-checkbox-radio-label-font-weight);
    line-height: func.units(vars.$input-checkbox-radio-size, 'rem');
    display: inline-block;
    outline: none;
    color: func.color(vars.$input-checkbox-radio-label-color);
    padding-left: calc($checkbox-radio-size + $label-distance);
    padding-top: $expand-hit-area;
    padding-bottom: $expand-hit-area;
}

.form-checkbox+label+.tooltip-wrapper {
    margin-top: $expand-hit-area;
    margin-bottom: $expand-hit-area;
    margin-left: func.units(1);
}

// Unchecked radio and checkbox button
.form-checkbox+label::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    box-sizing: border-box;
    display: inherit;
    background-color: func.color(vars.$input-checkbox-radio-unchecked-background-color);
    border: 2px solid func.color(vars.$input-checkbox-radio-unchecked-border-color);
    margin-right: $label-distance;
    height: $checkbox-radio-size;
    width: $checkbox-radio-size;
    margin-top: calc((func.units(vars.$input-checkbox-radio-size, 'rem') / 2) - ($checkbox-radio-size / 2) + $expand-hit-area); // Ensure correct placement of input on text zoom
}

// Unchecked checkbox button border radius
.form-checkbox+label::before {
    border-radius: func.border-radius('small');
}

// Checked checkbox
.form-checkbox:checked+label::before,
.form-checkbox[aria-checked="mixed"]+label::before,
.form-checkbox.mixed+label::before {
    background-color: func.color(vars.$input-checkbox-checked-background-color);
    border: 2px solid func.color(vars.$input-checkbox-checked-border-color);
    background-size: $checkmark-size;
    background-repeat: no-repeat;
    background-position: center;
}

// 'Normal' checkbox checkmark
.form-checkbox:checked+label::before {
    background-image: url(vars.$icons-folder-path + vars.$input-checkbox-checked-image + '.svg');
}

// 'Mixed' checkbox checkmark
.form-checkbox[aria-checked="mixed"]+label::before,
.form-checkbox.mixed+label::before {
    background-image: url(vars.$icons-folder-path + vars.$input-checkbox-mixed-image + '.svg');
}

// Focus
.form-checkbox:focus+label::before,
.form-checkbox.focus+label::before {
    @include mixins.focus;
}

// Helptext
.form-checkbox+label+.form-hint {
    padding-left: calc($checkbox-radio-size + $label-distance);
    margin-top: -$expand-hit-area;
}

// Special styling when radio/checkboxes are used to select table rows
.table--selectable th:first-child,
.table--selectable td:first-child {
    fds-checkbox {
        margin-top: 0;
        width: $checkbox-radio-size;
        height: $checkbox-radio-size;

        .form-checkbox,
        .form-radio {
            margin-top: 0;

            &+label {
                padding-left: 0;

                &::before {
                    margin-right: 0;
                    margin-top: calc((func.units(vars.$input-checkbox-radio-size, 'rem') / 2) - ($checkbox-radio-size / 2)); // Ensure correct placement of input on text zoom
                }

                &::after {
                    margin-top: calc((func.units(vars.$input-checkbox-radio-size, 'rem') / 2) - ($checkbox-radio-size / 2)); // Ensure correct placement of input on text zoom
                }
            }
        }
    }
}